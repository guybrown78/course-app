{"version":3,"sources":["js/data/requestFactory.js","js/data/models/BaseModel.js","js/data/collections/BaseCollection.js","js/data/models/errors/InvalidPropertyModel.js","js/data/collections/errors/InvalidPropertyCollection.js","js/data/models/ErrorModel.js","js/data/models/helpers/DeviceDetection.js","js/data/models/helpers/ScreenSizeDetection.js","js/data/dataStore.js","js/data/models/tree/BaseTreeModel.js","example/js/data/ExampleDataStore.js","js/router.js","js/views/BaseView.js","js/views/BaseLoadingView.js","js/views/PageView.js","js/views/sectionsStack/SectionsStackLayout.html!text","js/views/sectionsStack/section/BaseSection.html!text","js/views/sectionsStack/section/BaseSectionHeader.html!text","js/views/sectionsStack/section/BaseSectionView.js","js/views/sectionsStack/BaseSectionsStackPageView.js","js/views/tree/TreeView.html!text","js/views/tree/TreeNodeItem.html!text","js/views/tree/TreeView.js","js/views/sectionsStack/examples/sections/PrimarySection.html!text","js/views/sectionsStack/examples/sections/PrimarySectionView.js","js/views/sectionsStack/examples/sections/SecondarySection.html!text","js/views/sectionsStack/examples/sections/SecondarySectionView.js","js/views/sectionsStack/examples/DualFocusStackPageView.js","js/views/sectionsStack/examples/SliderStackPageView.js","js/views/courses/Courses.html!text","js/views/courses/CoursesPageView.js","example/exampleRouter.js","example/exampleApp.js","example/exampleMain.js"],"names":["define","$","Backbone","requestFactory","this","isLocal","apiVersion","token","centreId","developmentServicePrefix","servicePrefix","loginPrefix","validationRules","localServicePrefix","getHeaders","isNotAuth","Authorization","window","sessionStorage","getItem","Content-Type","getLoginHeaders","btoa","Accept","getServicePrefix","languageSpecific","getSerializedParams","requestParams","isLocalOverride","buildLocalFileRequestString","buildQueryString","requestParams_str","key","substring","length","abreviatedName","createLocalParamName","getPreventCacheString","dateUnique","today","Date","dStr","getTime","getFullYear","getMonth","getDay","getPreventCacheQueryString","setToken","updateToken","setCurrentCentre","cId","getCurrentCentre","getCentreQueryParam","roleId","param","l","setUpCORS","support","cors","proxiedSync","sync","method","model","options","crossDomain","BaseModel","Model","extend","loadParams","isGlobal","isLoading","validation","initialize","on","onLoadSuccess","onSaveSuccess","id","get","load","loadOptions","data","fetch","update","success","resp","status","xhr","trigger","type","JSON","stringify","dataType","jsonp","global","prototype","save","call","destroy","console","log","searchChildren","arr","child","property","attr","criteria","that","match","_","filter","models","item","push","getChildMatch","collection","newModels","getIsAlreadyLoaded","parse","response","nestedModels","nestedClass","nestedData","toJSON","includeNestedModels","json","clone","attributes","undefined","isFunction","getLoadOffset","limit","lastPos","Math","ceil","resetDefaults","set","defaults","nullify","reset","clear","off","setValidationRules","BaseCollection","Collection","callModelInitialisers","args","each","init","InvalidPropertyModel","domain","displayTitle","reason","InvalidPropertyCollection","ErrorModel","code","displayMessage","statusText","serviceId","errorAction","errors","DeviceDetectionModel","screenSize","screenSmall","screenSmallLowestThreshold","screenSmallHighestThreshold","screenMedium","screenMediumLowestThreshold","screenMediumHighestThreshold","screenLarge","screenLargeLowestThreshold","screenLargeHighestThreshold","Infinity","apply","setScreenSize","screenSizeDetectionModel","stageWidth","width","getScreenSize","isScreenSizeSmall","isScreenSizeMedium","isScreenSizeLarge","ScreenSizeDetectionModel","stageHeight","bind","onScreenResize","Number","height","DeviceDetection","ScreenSizeDetection","dataStoreModel","hasCheckedLocalStorage","login","dataError","deviceDetection","screenSizeDetection","parentRoute","isLoginPage","filestoreViewPreference","initialSetUpLoadComplete","listenTo","onStorageChange","localStorage","setItem","now","removeItem","setTimeout","onStorageInitialisedTimeout","initAjaxErrorHandler","event","originalEvent","newValue","sessionValues","getSavedTokenValues","revokeAuthorization","initiateLogout","revokeUser","initialiseCredentials","loadInSequence","queue","shift","Error","loadSuccess","getBasicLoadOptions","loadStart","loadSequenceComplete","headers","timeout","loadData","loadEvent","checkUserLoad","loadError","error","onCentreChange","document","ajaxError","jqXHR","settings","exception","getStatusError","statusError","responseJSON","isServerResponse","error_description","populateServerErrorMessage","populateLocalErrorMessage","getNonHTTPStatusError","serverError","errorObject","localError","getCustomDataError","location","dataLogout","clearUser","isLogout","UserSessionModel","returnToDefaultPage","handleErrorAction","BaseTreeModel","childrenLoaded","parentModel","rootModel","additionalIds","idAttribute","requiresReload","itemId","displayName","genericCount","parentId","depth","childrenCount","canEdit","isOpen","isSelected","children","onItemSelected","url","jsonURL","loadType","parseChildren","pluck","add","omit","constructor","resetChildren","setParentModels","mod","toggleOpenItemChildren","open","toggleOpenNestedChildren","getTreeItem","dataStore","treeModel","ExampleDataStore","tree","BaseRouter","Router","currentView","execute","callback","name","executeArgument","onDataStoreInitialised","stopListening","showApplicationSetup","ApplicationSetUpPageView","onInitialSetUpComplete","render","hash","nextLocation","switchView","view","viewType","viewModel","ignoreUserSessionLoad","View","referenceView","viewInitObject","body","scrollTop","documentElement","viewExists","switchableViews","indexOf","unescape","parseQueryString","queryString","params","map","decodeURI","split","el","i","aux","o","val","eval","BaseView","baseItemClickDebounceTimeout","baseItemClickDebounceTime","defer","postRender","baseOnItemClickedHandler","baseClearItemClickedDefer","onItemDoubleClickedHandler","baseItemClickedDefer","clearTimeout","proxiedEvent","onItemSingleClickedHandler","appendSubViewsToElement","SubView","events","subViewOptions","subViews","subView","append","destroyAppendedViews","stripDataIdFromElementId","element","delimiter","idStrings","getNoDataMessageHTML","msg","html","getDataErrorMessageHTML","title","setContentsHeightFromParentOffset","parentJqueryEL","contentJqueryEL","cssSelector","includeBottomPadding","availableContentHeight","floor","outerHeight","getContentsOffsetFromParentOffset","css","replace","offset","top","onUndevelopedMessageAlert","onAlert","enableActionButton","buttonEl","removeClass","removeProp","disableActionButton","addClass","prop","destroyModel","destroyView","remove","unbind","destroyEl","$el","empty","onDestroy","Spinner","BaseLoadingView","dataRequested","initialLoadRenderRenderComplete","showSpinner","spinnerCurrentlyVisable","loaderOptions","lines","radius","corners","rotate","color","speed","trail","shadow","hwaccel","className","zIndex","viewNumber","random","loaderElId","jqueryEL","initialLoadRender","removeSpinner","renderViewContent","initialiseLoaderElIdReference","showLoader","requestData","spinner","spin","spinnerEL","find","String","positionSpinner","detach","x","outerWidth","left","y","getScrollTop","pageYOffset","B","D","onDataLoadError","errorModel","showLoadErrorMessage","PageView","contentPadding","footerHeight","onDataLoad","onResize","destroyDataStoreListeners","undelegateEvents","onDataUpdate","renderPageContent","setPageContentHeight","getFooterHeight","onHeaderUpdate","availablePageHeight","setAdditionalPageItemsHeight","footers","getElementsByTagName","offsetHeight","BaseSectionTemplate","BaseSectionHeaderTemplate","BaseSectionView","template","headerTemplate","showHeader","index","restrictHeightToScreen","topOffset","contentOffset","verticalPadding","sectionBottomPadding","sectionEL","contentEL","openCloseButtonEL","openCloseButtonWidth","rendered","nullModelMessage","initialiseViewParametersFromOptions","initialiseLayoutTemplate","initialiseHeaderTemplate","initialiseModelListeners","click .toggle-open-close","getTemplateData","first","initialiseViewCalculations","renderSection","close","setHeight","columnEL","getElementsByClassName","prefixedEventListener","e","onTransistionComplete","pfx","p","toLowerCase","addEventListener","stopPropagation","onOpenCloseToggle","getHeaderTemplateData","renderSectionsContent","updateModel","currentSelectedModel","show","setTopOffset","h","contentHeight","setAdditionalViewItemHeights","removeModelListeners","LayoutTemplate","BasePageSectionsStackView","articleId","gridClass","gridType","currentDefaultFocusedIndex","currentFocusedIndex","sectionsStack","enableSliding","gridEL","elementsOffsetY","renderedPageContent","initialiseModel","initialiseSectionsStack","onDeviceDetectionChange","onStageWidthResize","getEnableSliding","onScroll","class","ordinal","setEnableSliding","flag","hasEnableSlidingChanged","slideToSection","initialiseSectionsStackViews","delegateEvents","pageTitle","section","addSectionsStackViewsListeners","setElement","sectionView","onSectionItemSelected","onSectionViewOpenClose","removeSectionsStackViewsListeners","updateNodeDetailsView","setSectionsStackViewHeights","direction","removeData","sectionIndex","animate","gridWidth","innerWidth","scrollPos","scrollLeft","destroySectionsStackViews","destroySectionsStack","sectionStackItem","TreeTemplate","TreeNodeItem","treeView","tagName","collapseSpeed","depthIndent","childTreeViews","nodeItemTemplate","nodeItemHeight","nodeItemEL","nodeChildrenEL","openCloseNodeItem","openCloseArrowOnly","arrowEL","showArrowEL","loadChildrenInternally","isModelLoading","additionalNodeStateParams","additionalNodeStateValue","additionalNodeStateSelector","additionalModelListenersHandlers","additionalRenderFunction","specifyDepth","setOptionParams","onChildrenLoaded","onSelectedStateChange","onItemDelete","onAdditionalNodeStateParamsChange","obj","listener","handler","parseInt","getChildrenLoadParams","initialiseEvents","click","onNodeItemSelected","toggleOpenState","setLoadingState","loadChildren","childrenEL","loader","closeNode","openNode","arrow","slideUp","promise","always","onSlideAnimationPromise","slideDown","addChildrenInstances","openNodePostRender","loadingEL","childViewOptions","childModel","childView","treeData","getNodeItemTemplate","childTreeView","pop","TreeView","PrimarySectionTemplate","PrimarySectionView","click .tree-node-item .active-select-area","contentTemplate","initialiseTreeView","onTreeViewGenericCountChange","currentTarget","closest","value","selectorQuery","SecondarySectionTemplate","SecondarySectionView","change form","onFormChange","BaseSectionsStackPageView","DualFocusSectionsStackView","itemModel","SliderSectionsStackView","temporaryModel","CoursesTemplate","CoursesView","DualFocusStackPageView","SliderStackPageView","CoursesPageView","exampleRouter","routes","myCourses","courses","dualFocusStack","sliderStack","*actions","showPage","path","href","selectedPageIdentifier","substr","lastIndexOf","newView","showSectionsStackPage","showError","defaultView","history","start","require","config","baseUrl","paths","jquery","underscore","backbone","text","App"],"mappings":"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ACA9nB,OAAAyO,SAAAyD,KAAA,aAKA3O,EAAA,WACA,GAAAujB,EACA7nB,UAAA8oB,QAAAC,QAGA,QACAzkB,WAAAA,KAIAxE,OAAA,sBC9FA,SACA,aACA,WACA,yBAEA,SAAAC,EAAA2G,EAAA1G,EAAAqS,GAEA,GAAA/N,GAAA,WAEA+N,EAAA/N,aAGA,QACAA,WAAAA,KCRA0kB,QAAAC,QACAC,QAAA,MAEAC,OACAnX,UAAA,mCACAoX,OAAA,6CACAC,WAAA,8CACAC,SAAA,0CACAC,KAAA,iCACAlP,QAAA,qCAIA2O,SAEA,sBAIA,SAAAQ,GAGAA,EAAAllB,eAGAxE,OAAA,sBAAA;AjC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7OA,AD8OA;AC7OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnSA,ADoSA;ACnSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA,ADsBA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA,AD4BA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACveA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7KA,AD8KA;AC7KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1KA,AD2KA;AC1KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7HA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClQA,ADmQA;AClQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnSA;AACA;AACA;ACFA,ADGA;ACFA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnYA,ADoYA;ACnYA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxEA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA,ADsCA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9EA,AD+EA;AC9EA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA,AD+BA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9FA,AD+FA;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"exampleMain.js","sourcesContent":["define('js/data/requestFactory',[\r\n    'jquery',\r\n    'backbone'\r\n\r\n], function($, Backbone) {\r\n\r\n    function requestFactory()\r\n    {\r\n        /**\r\n         * @class RequestFactory staic class containing helper funcs for models / collections\r\n         */\r\n        this.isLocal = false;\r\n        this.apiVersion = \"1\";\r\n        this.token = null;\r\n        this.centreId = null;\r\n        this.developmentServicePrefix = \".../api/\";\r\n        this.servicePrefix = \"...\";\r\n        this.loginPrefix = \".../connect/\";\r\n        this.validationRules = null;\r\n\r\n        // UAT Environment settings for local hosting of web services\r\n        // this.developmentServicePrefix = \".../api/\";\r\n        // this.servicePrefix = \".../api/\";\r\n        // this.loginPrefix = \".../api/connect/\";\r\n\r\n        // Environment settings for local hosting of web services\r\n        // this.developmentServicePrefix = \"https://localhost:44394/api/\";\r\n        // this.servicePrefix = \"https://localhost:44394/api/\";\r\n        // this.loginPrefix = \"https://localhost:44394/connect/\";\r\n\r\n        this.localServicePrefix = \"../testjson/\";\r\n\r\n        /**\r\n         * Returns request headers\r\n         *\r\n         * @returns {Object} request headers\r\n         */\r\n        this.getHeaders = function()\r\n        {\r\n            if (this.isLocal || this.isNotAuth)\r\n                return {}\r\n            return {\r\n                'Authorization':window.sessionStorage.getItem('token_type')+' '+window.sessionStorage.getItem('access_token'),\r\n                'Content-Type':'application/json'/*,\r\n                'Accept':'application/json'*/\r\n                //'Access-Control-Allow-Origin': '...',\r\n                //'contentType': 'application/json; charset=UTF-8',\r\n                //contentType: \"application/x-www-form-urlencoded; charset=UTF-8\"\r\n                //'dataType': 'json'};\r\n                //'X-Api-Version': this.apiVersion\r\n                //'dataType': \"json\"\r\n                //processData: false\r\n            }\r\n        };\r\n\r\n        this.getLoginHeaders = function()\r\n        {\r\n            return {\r\n                // Authorization Should be APP if using an actual access token,\r\n                // or APPWeb if using a GUID to the access token in the db\r\n                //'Authorization': \"Basic \" + btoa(\"APP\"+ \":\" + \"0C3404DC-C574-46C4-82DF-2B2A8922548E\"),\r\n                'Authorization': \"Basic \" + btoa(\"APPWeb\"+ \":\" + \"0C3404DC-C574-46C4-82DF-2B2A8922548E\"),\r\n                'Accept':'application/json',\r\n                'Content-Type': 'application/x-www-form-urlencoded'\r\n                //'Access-Control-Allow-Origin': 'http://...',\r\n                //'contentType': 'application/json; charset=UTF-8',\r\n                //contentType: \"application/x-www-form-urlencoded; charset=UTF-8\"\r\n                //'dataType': 'json'};\r\n                //'X-Api-Version': this.apiVersion\r\n                //'dataType': \"json\"\r\n                //processData: false\r\n            }\r\n        };\r\n        /**\r\n         * Returns correct service prefix\r\n         *\r\n         * @param {String} isLocalOverride allows individual service to be loaded locally\r\n         * @returns {String} service prefix\r\n         */\r\n        this.getServicePrefix = function(languageSpecific)\r\n        {\r\n            languageSpecific = (typeof languageSpecific !== 'undefined') ? languageSpecific : true;\r\n            if (this.isLocal)\r\n            {\r\n                return this.localServicePrefix;\r\n            }\r\n            if(!languageSpecific)\r\n            {\r\n                return this.developmentServicePrefix;\r\n            }\r\n            return this.developmentServicePrefix+\"en-GB/\";\r\n        };\r\n\r\n        /**\r\n         * Serializes object containing request params into string\r\n         *\r\n         * @param {Object} requestParams object describing request parameters\r\n         * @returns {String} string of serialized params\r\n         */\r\n        this.getSerializedParams = function(requestParams, isLocalOverride)\r\n        {\r\n            if (this.isLocal || isLocalOverride)\r\n                return this.buildLocalFileRequestString(requestParams) + \".json\";\r\n            return this.buildQueryString(requestParams);\r\n        };\r\n\r\n        /**\r\n         * Serializes object containing request params into query string\r\n         *\r\n         * @param {Object} requestParams object describing request parameters\r\n         * @returns {String} string of serialized params\r\n         */\r\n        this.buildQueryString = function(requestParams)\r\n        {\r\n            var requestParams_str = \"?\";\r\n            for (var key in requestParams)\r\n            {\r\n                requestParams_str += key + \"=\" + requestParams[key];\r\n                requestParams_str += \"&\";\r\n            }\r\n            if (this.token != null)\r\n            {\r\n                requestParams_str += \"token=\" + this.token;\r\n            }\r\n            else\r\n            {\r\n                // remove trailing '&'\r\n                requestParams_str = requestParams_str.substring(0, requestParams_str.length - 1);\r\n            }\r\n            //requestParams_str += \"&r=\" + new Date().getTime();\r\n            return requestParams_str;\r\n        };\r\n\r\n        /**\r\n         * Serializes object containing request params into local file reference string\r\n         *\r\n         * @param {Object} requestParams object describing request parameters\r\n         * @returns {String} string of serialized params\r\n         */\r\n        this.buildLocalFileRequestString = function(requestParams)\r\n        {\r\n            var requestParams_str = \"/&\";\r\n            for (var key in requestParams)\r\n            {\r\n                var abreviatedName = this.createLocalParamName(key);\r\n                requestParams_str += abreviatedName + \"=\" + requestParams[key];\r\n                requestParams_str += \"&\";\r\n            }\r\n            requestParams_str = requestParams_str.substring(0, requestParams_str.length - 1);\r\n            if (this.token != null)\r\n            {\r\n                requestParams_str += \"&to=\" + this.token;\r\n            }\r\n            return requestParams_str;\r\n        };\r\n\r\n        this.getPreventCacheString = function(dateUnique)\r\n        {\r\n            if (this.isLocal)\r\n                return \"\";\r\n            var today = new Date(),\r\n                dStr = today.getTime();\r\n            if (dateUnique)\r\n                // return same number for every request made per day\r\n                dStr = new Date(today.getFullYear(), today.getMonth(), today.getDay()).getTime();\r\n            return dStr;\r\n        };\r\n\r\n        this.getPreventCacheQueryString = function(dateUnique)\r\n        {\r\n            return \"&pc=\" + this.getPreventCacheString(dateUnique);\r\n        };\r\n\r\n        this.setToken = function(updateToken)\r\n        {\r\n            this.token = updateToken;\r\n            //window.localStorage.setItem(\"persistLogon\", this.token);\r\n        };\r\n\r\n        this.setCurrentCentre = function(cId)\r\n        {\r\n            this.centreId = cId\r\n        };\r\n\r\n        this.getCurrentCentre = function()\r\n        {\r\n            return this.centreId;\r\n        };\r\n        this.getCentreQueryParam = function(roleId)\r\n        {\r\n            switch (roleId){\r\n                case 10:\r\n                    return this.getCurrentCentre();\r\n                    break;\r\n            }\r\n            return null;\r\n        };\r\n        this.createLocalParamName = function(param)\r\n        {\r\n            var l = param.length;\r\n            if(l < 8)\r\n                return param;\r\n            return param.substring(0, 8);\r\n        };\r\n\r\n        /*\r\n         * Override Backbone.sync to enable Cross Origin Requests\r\n         */\r\n        this.setUpCORS = function() {\r\n            // only set up cors if connecting to remote data source\r\n            if (this.isLocal === false)\r\n            {\r\n                $.support.cors = true;\r\n                var proxiedSync = Backbone.sync;\r\n                Backbone.sync = function(method, model, options) {\r\n                    options || (options = {\r\n                    });\r\n                    if (model.isLocal !== true)\r\n                    {\r\n                        if (!options.crossDomain)\r\n                        {\r\n                            options.crossDomain = true;\r\n                        }\r\n                        /*if (!options.xhrFields)\r\n                        {\r\n                            options.xhrFields = {\r\n                                withCredentials: true\r\n                            };\r\n                        }*/\r\n                    }\r\n                    return proxiedSync(method, model, options);\r\n                };\r\n            }\r\n        };\r\n    }\r\n    return new requestFactory;\r\n});\r\n\n","define('js/data/models/BaseModel',[\r\n    'backbone'\r\n\r\n], function(Backbone) {\r\n\r\n    /**\r\n     * @class BaseResultModel data model defining methods common to all models\r\n     */\r\n    var BaseModel = Backbone.Model.extend({\r\n        loadParams: null,\r\n        isGlobal:true,\r\n        isLoading:false,\r\n\r\n        validation:{},\r\n        validationRules:[],\r\n        /**\r\n         * Set up listeners\r\n         *\r\n         */\r\n        initialize: function()\r\n        {\r\n            this.on('success', this.onLoadSuccess);\r\n            this.on('saveSuccess', this.onSaveSuccess);\r\n           // this.setValidationRules();\r\n            // set backbone id\r\n            this.id = this.get('id');\r\n        },\r\n\r\n        /**\r\n         * This is set to be overridden by any models that need to use another method than fetch\r\n         */\r\n        load:function(loadOptions, data)\r\n        {\r\n            if(data)\r\n            {\r\n                this.loadParams = data;\r\n            }\r\n            this.fetch(loadOptions);\r\n        },\r\n\r\n        update:function(loadOptions, data)\r\n        {\r\n            loadOptions || (loadOptions = {});\r\n            var success = loadOptions.success;\r\n            var model = this;\r\n            // success doesn't have an event so always trigger\r\n            loadOptions.success = function(resp, status, xhr) {\r\n                model.trigger('saveSuccess', model, resp, xhr);\r\n                if (success) {\r\n                    success(model, resp, xhr);\r\n                }\r\n            };\r\n            if(model.type === 'login')\r\n            {\r\n                loadOptions.data = $.param(data);\r\n            }\r\n            else\r\n            {\r\n                loadOptions.data = JSON.stringify(data);\r\n                loadOptions.dataType = \"json\";\r\n                // The jsonp setting prevents issues with sending ? as text.\r\n                // In addition contentType = \"application/json; charset=UTF-8\" could also be set in replace.\r\n                // Please see https://github.com/jquery/jquery/issues/1799 OR\r\n                //            https://github.com/jquery/api.jquery.com/issues/878\r\n                loadOptions.jsonp = false;\r\n            }\r\n            loadOptions.global = this.isGlobal;\r\n            Backbone.Model.prototype.save.call(this, data, loadOptions);\r\n        },\r\n\r\n        /**\r\n         * Overides Backbone method to add 'success' event\r\n         *\r\n         * @param {Object } options\r\n         */\r\n        fetch: function(loadOptions, data) {\r\n            loadOptions || (loadOptions = {\r\n            });\r\n            var success = loadOptions.success;\r\n            var model = this;\r\n        //    loadOptions.headers.dataType = \"json\";\r\n            // success doesn't have an event so always trigger\r\n            loadOptions.success = function(resp, status, xhr) {\r\n                model.trigger('success', model, resp, xhr);\r\n                if (success) {\r\n                    success(model, resp, xhr);\r\n                }\r\n            };\r\n            loadOptions.data = data;\r\n            loadOptions.global = this.isGlobal;\r\n            Backbone.Model.prototype.fetch.call(this, loadOptions);\r\n        },\r\n\r\n        /**\r\n         * Overides Backbone method to add 'success' event\r\n         *\r\n         * @param {Object } options\r\n         */\r\n        destroy: function(loadOptions) {\r\n            console.log(\"BASE MODEL\");\r\n            loadOptions || (loadOptions = {\r\n            });\r\n            var success = loadOptions.success;\r\n            var model = this;\r\n            // trigger specific destroy success event so views can listen to success\r\n            loadOptions.success = function(resp, status, xhr) {\r\n                model.trigger('deleteSuccess', model, resp, xhr);\r\n                if (success) {\r\n                    success(model, resp, xhr);\r\n                }\r\n            };\r\n            loadOptions.global = this.isGlobal;\r\n            Backbone.Model.prototype.destroy.call(this, loadOptions);\r\n        },\r\n\r\n        searchChildren:function(arr, child, property, attr, criteria)\r\n        {\r\n            var that = this;\r\n            var match = null;\r\n            match = _.filter(child.models, function(item)\r\n            {\r\n                if(item.get(attr) === criteria)\r\n                {\r\n                    arr.push(item);\r\n                }\r\n                if(item.get(property) && item.get(property).length > 0)\r\n                {\r\n                    that.searchChildren(arr, item.get(property), property, attr, criteria);\r\n                }\r\n            });\r\n        },\r\n\r\n        getChildMatch:function(collection, property, attr, criteria)\r\n        {\r\n            var newModels = [];\r\n            this.searchChildren(newModels, collection, property, attr, criteria);\r\n            if(newModels.length > 0)\r\n            {\r\n                return newModels[0];\r\n            }\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * To be overridden if model has actions to perform on successful load\r\n         *\r\n         */\r\n        onLoadSuccess: function() {\r\n            //to be overridden\r\n        },\r\n\r\n        /**\r\n         * To be overridden if model has actions to perform on successful save\r\n         *\r\n         */\r\n        onSaveSuccess:function()\r\n        {\r\n            //to be overridden\r\n        },\r\n\r\n        /**\r\n         * Set to be overridden by any models that may not need loaded (i.e. userModel, clientConfig)\r\n         *\r\n         */\r\n        getIsAlreadyLoaded: function()\r\n        {\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Overrides Backbone method to enable parsing of complex nested data structures and allowing definition of Model / Collection types to be assigned to each\r\n         * Requires 'models' property to be defined as object containing one or many 'key:Class' property (e.g. models: {Roles:RoleCollection})\r\n         *\r\n         * 'key' = data attribute name in json / model e.g. Status\r\n         * 'class' = data model / collection classname e.g. StatusModel\r\n         *\r\n         * NOTE: Models MUST be created in 'defaults' declaration otherwise will not work when model is parsed as part of a collection e.g.\r\n         *  defaults: {\r\n                Status: new StatusModel\r\n            }\r\n         *\r\n         * @param {response} JSON data\r\n         * @returns {Object} object reflecting nested data structure\r\n         */\r\n        parse: function(response) {\r\n            for (var key in this.nestedModels)\r\n            {\r\n                var nestedClass = this.nestedModels[key];\r\n                var nestedData = response[key];\r\n                //{parse:true} attr needed to ensure parse method is called on nested models that are not part of collections\r\n                    response[key] = new nestedClass(nestedData, {\r\n                        parse: true\r\n                    });\r\n                }\r\n            return response;\r\n        },\r\n\r\n        /**\r\n         * Overrides Backbone method to enable serialisation of complex nested data structures and allowing definition of Model / Collection types to be assigned to each\r\n         * Requires 'models' property to be defined as object containing one or many 'key:Class' property (e.g. models: {Roles:RoleCollection})\r\n\r\n         * 'key' = data attribute name in json / model e.g. Status\r\n         * 'class' = data model / collection classname e.g. StatusModel\r\n         *\r\n         * NOTE: Models MUST be created in 'defaults' declaration otherwise will not work when model is parsed as part of a collection e.g.\r\n         *  defaults: {\r\n                Status: new StatusModel\r\n            }\r\n         *\r\n         *\r\n         * @returns {JSON} json objet reflecting nested data structure\r\n         */\r\n        toJSON: function(includeNestedModels) {\r\n            // default backbone implementation\r\n            var json = _.clone(this.attributes);\r\n            if (json !== null) {\r\n                // loop through defined keys and call toJSON on each\r\n                if (includeNestedModels === undefined || includeNestedModels === true)\r\n                {\r\n                    for (var key in this.nestedModels)\r\n                    {\r\n                        // confirm object has toJSON() method\r\n                        if (json[key] && json[key] !== null && _(json[key].toJSON).isFunction())\r\n                        {\r\n                            // call toJSON() on object\r\n                            json[key] = json[key].toJSON();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return json;\r\n        },\r\n\r\n        getLoadOffset:function(collection, limit)\r\n        {\r\n            if(collection !== null)\r\n            {\r\n                var lastPos = collection.length;\r\n                return Math.ceil(lastPos/limit) + 1;\r\n            }\r\n            return 1;\r\n        },\r\n\r\n        resetDefaults:function()\r\n        {\r\n            this.set(this.defaults);\r\n        },\r\n\r\n        nullify:function()\r\n        {\r\n            for (var key in this.nestedModels)\r\n            {\r\n                if (this.get(key) && _.isFunction(this.get(key).reset))\r\n                {\r\n                    this.get(key).reset();\r\n                }\r\n            }\r\n            this.clear();\r\n            this.off();\r\n        },\r\n        \r\n        setValidationRules:function()\r\n        {\r\n            /*this.validation = {};\r\n            var that = this;\r\n            _.each(this.validationRules, function(rule){\r\n                that.validation[rule.attribute] = that.setRuleInValidationFormat(rule);\r\n                that.listenTo(that, 'change:'+rule.attribute, that.checkAttributeIsValid);\r\n            });*/\r\n        }//,\r\n        \r\n        /*checkAttributeIsValid:function(model)\r\n        {\r\n            var that = this;\r\n            _.each(model.changed, function(value, key){\r\n\r\n                var error = that.checkValidationErrors(key);\r\n                var attrValid = true;\r\n                if(error && error.length > 0)\r\n                {\r\n                    attrValid = false;\r\n                }\r\n                that.trigger('attribute:checkValid', key, attrValid, error);\r\n            });\r\n        }*/\r\n        \r\n        \r\n       \r\n    });\r\n    return BaseModel;\r\n});\r\n\n","define('js/data/collections/BaseCollection',[\r\n    'underscore',\r\n    'backbone',\r\n], function(_, Backbone) {\r\n    var BaseCollection = Backbone.Collection.extend({\r\n        \r\n        isGlobal:true,\r\n        loadParams:null,\r\n        \r\n        initialize: function() {\r\n            this.on('reset', this.callModelInitialisers)\r\n            this.on('add', this.callModelInitialisers)\r\n        },\r\n        \r\n        callModelInitialisers: function(args) {\r\n            _.each(this.models, function(model) {\r\n                if (model.init) {\r\n                    model.init(args)\r\n                }\r\n            })\r\n        },\r\n        \r\n        /**\r\n         * This is set to be overridden by any collections that need to use another method than fetch\r\n         */\r\n        load:function(loadOptions, data)\r\n        {\r\n            loadOptions.reset = true;\r\n            if(data)\r\n            {\r\n                this.loadParams = data;\r\n            }\r\n            this.fetch(loadOptions)\r\n        },\r\n        \r\n        /**\r\n         * Overides Backbone method to add 'success' event\r\n         *\r\n         * @param {Object } options\r\n         */\r\n        fetch: function(loadOptions) {\r\n            loadOptions || (loadOptions = {\r\n            });\r\n            var success = loadOptions.success;\r\n            var collection = this;\r\n        //    loadOptions.headers.dataType = \"json\";\r\n            // success doesn't have an event so always trigger\r\n            loadOptions.success = function(resp, status, xhr) {\r\n                collection.trigger('success', collection, resp, xhr);\r\n                if (success) {\r\n                    success(collection, resp, xhr);\r\n                }\r\n            };\r\n            loadOptions.global = this.isGlobal;\r\n            Backbone.Collection.prototype.fetch.call(this, loadOptions);\r\n        },\r\n        \r\n        update:function(loadOptions, data)\r\n        {\r\n            loadOptions || (loadOptions = {});\r\n            var success = loadOptions.success;\r\n            var collection = this;\r\n            // success doesn't have an event so always trigger\r\n            loadOptions.success = function(resp, status, xhr) {\r\n                collection.trigger('saveSuccess', collection, resp, xhr);\r\n                if (success) {\r\n                    success(collection, resp, xhr);\r\n                }\r\n            };\r\n            loadOptions.data = JSON.stringify(data);\r\n            Backbone.sync(\"update\", this, loadOptions)\r\n        },\r\n                \r\n        getIsAlreadyLoaded:function()\r\n        {\r\n            return false;\r\n        }\r\n    });\r\n    return BaseCollection;\r\n});\r\n\n","define('js/data/models/errors/InvalidPropertyModel',[\r\n    'js/data/models/BaseModel'\r\n    \r\n], function(BaseModel) {\r\n\r\n    /**\r\n     * @class InvalidPropertyModel contains attributes for multiple errors returned from a call\r\n     */\r\n    var InvalidPropertyModel = BaseModel.extend({\r\n        type:\"InvalidProperty\",\r\n        defaults:{\r\n            domain:\"\",\r\n            displayTitle:\"\",// ? not really sure why we need this\r\n            reason:\"\",\r\n            type:\"\"\r\n        }\r\n\r\n    });\r\n    return InvalidPropertyModel;\r\n});\r\n\r\n\n","define('js/data/collections/errors/InvalidPropertyCollection',[\r\n    'js/data/collections/BaseCollection',\r\n    'js/data/models/errors/InvalidPropertyModel'\r\n], function(BaseCollection, InvalidPropertyModel) {\r\n    var InvalidPropertyCollection = BaseCollection.extend({\r\n        type:'InvalidProperty',\r\n        model: InvalidPropertyModel\r\n    });\r\n    return InvalidPropertyCollection;\r\n});\r\n\n","define('js/data/models/ErrorModel',[\r\n    'js/data/models/BaseModel',\r\n    'js/data/collections/errors/InvalidPropertyCollection'\r\n\r\n], function(BaseModel, InvalidPropertyCollection) {\r\n\r\n    var ErrorModel = BaseModel.extend({\r\n        type:\"Error\",\r\n        defaults: {\r\n            /*errorId:0,\r\n            errorType: \"ajaxError\",\r\n            displayTitle:\"An unknown error has occured\", \r\n            displayMessage: \"A data loading error has occurred please try again.\",\r\n            status: 0,\r\n            statusText:\"\",\r\n            //code:\"\",\r\n            serviceId:\"\",\r\n            errorAction:\"generalError\",\r\n            errors:new InvalidPropertyCollection*/\r\n            code:0,\r\n            displayTitle:\"An unknown error has occured\", \r\n            displayMessage: \"A data loading error has occurred please try again.\",\r\n            status: 0,\r\n            statusText:\"\",\r\n            serviceId:\"\",\r\n            errorAction:\"generalError\",\r\n            errors:new InvalidPropertyCollection\r\n        },\r\n        \r\n        nestedModels:{\r\n            errors:InvalidPropertyCollection\r\n        }\r\n\r\n    });\r\n    return ErrorModel;\r\n});\r\n\n","define('js/data/models/helpers/DeviceDetection',[\n    'js/data/models/BaseModel'\n\n], function(BaseModel) {\n\n    var DeviceDetectionModel = BaseModel.extend({\n        type:\"DeviceDetection\",\n        defaults: {\n            screenSize:null,\n            screenSmall:\"screenSmall\",\n            screenSmallLowestThreshold:0,\n            screenSmallHighestThreshold:479,\n            screenMedium:\"screenMedium\",\n            screenMediumLowestThreshold:480,\n            screenMediumHighestThreshold:959,\n            screenLarge:\"screenLarge\",\n            screenLargeLowestThreshold:960,\n            screenLargeHighestThreshold:Infinity\n        },\n        initialize: function() \n        {\n            BaseModel.prototype.initialize.apply(this);\n            this.setScreenSize();\n        },\n        setScreenSize:function(screenSizeDetectionModel)\n        {\n            var stageWidth;\n            if(screenSizeDetectionModel){\n                stageWidth = screenSizeDetectionModel.get('stageWidth');\n            }else{\n                stageWidth = $(window).width();\n            }\n            \n            if(stageWidth <= this.get('screenSmallHighestThreshold')){\n                this.set('screenSize', this.get('screenSmall'));\n            }else if(stageWidth >= this.get('screenMediumLowestThreshold') && stageWidth <= this.get('screenMediumHighestThreshold')){\n                this.set('screenSize', this.get('screenMedium'));\n            }else if(stageWidth >= this.get('screenLargeLowestThreshold')){\n                this.set('screenSize', this.get('screenLarge'));\n            }\n        },\n        getScreenSize:function()\n        {\n           this.setScreenSize();\n           return this.get('screenSize');\n        },\n        isScreenSizeSmall:function()\n        {\n           return this.getScreenSize() === this.get('screenSmall');\n        },\n        isScreenSizeMedium:function()\n        {\n           return this.getScreenSize() === this.get('screenMedium');\n        },\n        isScreenSizeLarge:function()\n        {\n           return this.getScreenSize() === this.get('screenLarge');\n        }\n    });\n    return DeviceDetectionModel;\n});\n\n","define('js/data/models/helpers/ScreenSizeDetection',[\n    'js/data/models/BaseModel'\n\n], function(BaseModel) {\n\n    var ScreenSizeDetectionModel = BaseModel.extend({\n        type:\"ScreenSizeDetection\",\n        defaults: {\n            stageHeight:null,\n            stageWidth:null,\n        },\n        initialize: function() \n        {\n            BaseModel.prototype.initialize.apply(this);\n            $(window).on('resize', _.bind(this.onScreenResize, this));\n            this.onScreenResize();\n        },\n        onScreenResize: function()\n        {\n            this.set('stageHeight', Number($(window).height())); \n            this.set('stageWidth', Number($(window).width()));\n            this.trigger('screen:resize');\n        }\n        \n    });\n    return ScreenSizeDetectionModel;\n});\n\n","define('js/data/dataStore',[\r\n    'jquery',\r\n    'backbone',\r\n    'js/data/requestFactory',\r\n  //  'js/data/models/login/LoginModel',\r\n    'js/data/models/ErrorModel',\r\n  //  'js/data/models/user/UserSessionModel',\r\n    'js/data/models/helpers/DeviceDetection',\r\n    'js/data/models/helpers/ScreenSizeDetection'\r\n\r\n], function($, Backbone, requestFactory, /*LoginModel,*/ ErrorModel, /*UserSessionModel,*/ DeviceDetection, ScreenSizeDetection) {\r\n\r\n    var dataStoreModel = Backbone.Model.extend({\r\n        hasCheckedLocalStorage:false,\r\n        isLoading: true,\r\n        login:null,\r\n        dataError:null,       \r\n       // userSession:null,\r\n        deviceDetection:null,\r\n        screenSizeDetection:null,\r\n\r\n        parentRoute:null,\r\n        isLoginPage:false,\r\n        filestoreViewPreference:'grid',\r\n        initialSetUpLoadComplete:false,\r\n        \r\n        initialize: function() {\r\n            this.set('dataError', new ErrorModel());\r\n           // this.set('userSession', new UserSessionModel);\r\n           // this.set('login', new LoginModel());\r\n            // initialise global helpers\r\n            // screen sizes and device detection\r\n            this.set('deviceDetection', new DeviceDetection());\r\n            this.set('screenSizeDetection', new ScreenSizeDetection());\r\n            this.get('deviceDetection').listenTo(this.get('screenSizeDetection'), 'change:stageWidth', this.get('deviceDetection').setScreenSize, this.get('screenSizeDetection'));\r\n            //\r\n         //   this.listenTo(this.get('userSession').get('user'), 'change:currentCentreId', this.onCentreChange);\r\n            // initialise sharing sessionStorage between tabs using localStorage events\r\n            // listen for localStorage changes\r\n            $(window).on('storage', _.bind(this.onStorageChange, this));\r\n            // Add and then immediatly remove a new TEMPORARY date element into the \r\n            // localStorage to trigger the localStorage change event\r\n            window.localStorage.setItem('getSessionStorageValue', Date.now());\r\n            window.localStorage.removeItem('getSessionStorageValue');\r\n            // If the current window/tab is the first/initital window/tab of the \r\n            // application,  (ie if APP has just been launched), \r\n            // then there is no change of localstorage to catch. \r\n            // Therefore, the router 'execute' function will never be called \r\n            // and the application will fail to render it's first view.\r\n            // To workaround this, give the localstorage a moment to initialise \r\n            // itself and then trigger the event handler manually\r\n            setTimeout(this.onStorageInitialisedTimeout, 250);\r\n            //\r\n            requestFactory.setUpCORS();\r\n            this.initAjaxErrorHandler();\r\n        },\r\n        \r\n        onStorageInitialisedTimeout:function(event){\r\n            /* Some browsers don't support the storage event, and most of the \r\n             browsers that do support it will only call it when the storage is \r\n             changed by a different window.\r\n             \r\n             To get around this, we manually trigger the even handle so the \r\n             router can move on. This is only done if hasCheckedLocalStorage\r\n             hasn't already been flagged.\r\n             */\r\n            if(!this.hasCheckedLocalStorage){\r\n                $(window).trigger('storage');\r\n            }\r\n        },\r\n        onStorageChange:function(event)\r\n        {\r\n            if(!event.originalEvent)\r\n            {\r\n                //console.log(\"caught the blank event\");\r\n            }\r\n            else if(event.originalEvent.key === 'setSessionStorageValue')\r\n            {\r\n                window.localStorage.setItem('getSessionStorageValue', Date.now());\r\n                window.localStorage.removeItem('getSessionStorageValue');\r\n            }\r\n            else if(event.originalEvent.key === 'getSessionStorageValue')\r\n            {\r\n                window.localStorage.setItem('sessionValues', JSON.stringify(window.sessionStorage));\r\n                window.localStorage.removeItem('sessionValues');\r\n            }\r\n            else if(event.originalEvent.key === 'sessionValues' && event.originalEvent.newValue !== null)\r\n            {\r\n                var sessionValues = JSON.parse(event.originalEvent.newValue);\r\n                for (key in sessionValues)\r\n                {\r\n                    window.sessionStorage.setItem(key, sessionValues[key]);\r\n                }\r\n                this.get('login').getSavedTokenValues();\r\n            }\r\n            else if(event.originalEvent.key === 'logout')\r\n            {\r\n                this.get('login').revokeAuthorization();\r\n                this.initiateLogout();\r\n            }\r\n            else if(event.originalEvent.key === 'timeout')\r\n            {\r\n                this.revokeUser();\r\n            }\r\n            // set the hasCheckedLocalStorage flag and trigger store:storageInitialised\r\n            // event. store:storageInitialised is possibly listened to in the router\r\n            this.hasCheckedLocalStorage = true;\r\n            this.trigger('store:storageInitialised');\r\n        },\r\n        \r\n        initialiseCredentials:function()\r\n        {\r\n            window.localStorage.setItem('setSessionStorageValue', Date.now());\r\n            window.localStorage.removeItem('setSessionStorageValue');\r\n        },\r\n        \r\n        loadInSequence: function(queue, model)\r\n        {\r\n            // load next item in queue\r\n            if (queue.length)\r\n            {\r\n                // if queue contains items, remove first item load and load it\r\n                model = queue.shift();\r\n                //console.log(model);\r\n                if (model !== null)\r\n                {\r\n                    // check if data requested is already loaded\r\n                    // base model always returns false, override this in any models where you don't want to load\r\n                    if (!model.getIsAlreadyLoaded())\r\n                    {\r\n                        // if not loaded then load\r\n                        var that = this,\r\n                            loadOptions = this.getBasicLoadOptions();\r\n                        loadOptions.success = _.bind(this.loadSuccess, that, queue, model);\r\n                        // fetch item\r\n                        this.loadStart();\r\n                        model.load(loadOptions);\r\n                    }\r\n                    else\r\n                    {\r\n                        // if model already loaded then call init method if present\r\n                        if (_(model.init).isFunction())\r\n                            model.init();\r\n                        // if alread loaded load next item in queue\r\n                        this.loadSuccess(queue, model);\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    // model not found - cancel load and throw error\r\n                    this.isLoading = false;\r\n                    throw new Error(\"DataStore.loadInSequence(): model not found\");\r\n                }\r\n            }\r\n            else\r\n            {\r\n                // if queue empty then trigger update event in indicate loading is finished\r\n                this.isLoading = false;\r\n                this.loadSequenceComplete(model);\r\n            }\r\n        },\r\n        getBasicLoadOptions:function(){\r\n            var loadOptions = {\r\n                headers: requestFactory.getHeaders(),\r\n                timeout: 300000\r\n            };\r\n            return loadOptions;\r\n        },\r\n        loadStart: function() {\r\n            // trigger update event\r\n            this.isLoading = true;\r\n            this.trigger('store:loadStart');\r\n        },\r\n        \r\n        loadSuccess: function(queue, model)\r\n        {\r\n            //console.log(\"model type \"+model.type);\r\n            this.loadInSequence(queue, model);\r\n        },\r\n        \r\n        loadSequenceComplete: function(model) {\r\n            // trigger update event \r\n            this.isLoading = false;\r\n            /*if(model.type === 'userSession')\r\n            {\r\n                this.trigger('user:loadSuccess');\r\n            }*/\r\n            var event = 'store:';\r\n            /*if (this.loadEvent)\r\n            {\r\n                event += this.loadEvent;\r\n                this.loadEvent = null;\r\n                this.trigger(event,{model:model});\r\n            }\r\n            else\r\n            {*/\r\n                event += 'update';\r\n                this.trigger(event);\r\n            /*}*/\r\n        },\r\n                \r\n        loadData: function(queue, event)\r\n        {\r\n            // prevent multiple requests\r\n            /*if(this.get('login').checkLoginIsRequired())\r\n            {\r\n                //console.log(\"IS THIS VIA DATASTORE\");\r\n                window.location = \"../login/index.html#login\";\r\n            }*/\r\n            /*else if (!this.isLoading)\r\n            {*/\r\n                this.loadEvent = event;\r\n                /*var hasLogin = _.findWhere(queue, {\"type\":\"login\"});\r\n                if(!hasLogin && this.get('login').checkRefreshRequired())\r\n                {\r\n                    queue.unshift(this.get('login'));\r\n                }*/\r\n                this.loadInSequence(queue);\r\n           /* }*/\r\n        },\r\n        \r\n        checkUserLoad:function(queue)\r\n        {\r\n            \r\n            /*\r\n            if(!this.get('userSession').getIsAlreadyLoaded())\r\n            {\r\n                queue.unshift(this.get('userSession'));\r\n            }\r\n            */\r\n        },\r\n        \r\n        loadError: function(error) {\r\n            this.isLoading = false;\r\n            this.get('dataError').clear();\r\n            this.get('dataError').set(error);\r\n            /*\r\n            * On a 400 login error, the page should display a popup\r\n            * This should allow the user to log in again at the page they are currently at\r\n            * This is handled in the base page view, but may be called from any 400 error\r\n            * Whether this is local or global\r\n            * So an event is dispatched to handle this in the page\r\n            * Even if the call is not a page call\r\n            */ \r\n            /*if(error.errorAction === 'timeoutUser' && !this.isLoginPage)\r\n            {\r\n                console.log('trigger login error');\r\n                this.trigger('error:login');\r\n            }\r\n            else\r\n            {*/\r\n                this.trigger(\"store:error\");\r\n            /*}*/\r\n        },\r\n        \r\n        onCentreChange:function(event)\r\n        {\r\n            //requestFactory.setCurrentCentre(this.get('userSession').get('user').get('currentCentreId'));\r\n        },\r\n        \r\n        \r\n        initAjaxErrorHandler: function() {\r\n            var that = this;\r\n            $(document).ajaxError(function(event, jqXHR, settings, exception) {\r\n               /* if (that.get('login').isLogout)\r\n                {\r\n                    //if an error occurs in the logging out process\r\n                    //it should handle as if the call was successful\r\n                    //by removing the token and returning the user to the login page\r\n                    //the user is still logged out as they do not have credentials to access the services\r\n                    that.loadSequenceComplete(that.get('login'));\r\n                }\r\n                else\r\n                {*/\r\n                    that.loadError(that.getStatusError(jqXHR, exception));\r\n               /* }*/\r\n            });\r\n        },\r\n        \r\n        getStatusError:function(jqXHR, exception)\r\n        {\r\n            var statusError = {};\r\n            if (!jqXHR.status || jqXHR.status === null)\r\n            {\r\n               //If no status is returned, then the error is not from the server\r\n               //e.g.for an aborted request, or a network failure\r\n               console.log(\"non http status error\")\r\n               statusError = this.getNonHTTPStatusError(exception);\r\n            }\r\n            else\r\n            {\r\n                var attributes = jqXHR.responseJSON,\r\n                    isServerResponse = (attributes && attributes !== null && ((attributes.code && attributes.code > 0) || (jqXHR.status === 400 && attributes.error_description)))\r\n                if (isServerResponse)\r\n                {\r\n                    //If the response returned from the server is valid JSON \r\n                    //then error model attributes are created from the server response\r\n                    statusError = this.populateServerErrorMessage(jqXHR.status, jqXHR.statusText, attributes);\r\n                }\r\n                else\r\n                {\r\n                    //If no responseJSON is returned, and data Content-Type from the server is not JSON \r\n                    //or the server response does not bring back the expected data\r\n                    //then error model attributes are created manually\r\n                    statusError = this.populateLocalErrorMessage(jqXHR.status, jqXHR.statusText, attributes)\r\n                }\r\n            }\r\n            return statusError;        \r\n        },\r\n        \r\n        populateServerErrorMessage:function(status, statusText, serverError)\r\n        {\r\n            var errorObject = {};\r\n            errorObject.status = status;\r\n            errorObject.statusText = statusText;\r\n            if(status === 400)\r\n            {\r\n                errorObject.code = status;\r\n                errorObject.displayTitle = serverError.error;\r\n                errorObject.displayMessage = serverError.error_description;\r\n            }\r\n            else\r\n            {\r\n                errorObject.displayMessage = serverError.displayMessage;\r\n                errorObject.displayTitle = serverError.displayTitle;\r\n                errorObject.code = serverError.code;\r\n                errorObject.errors = serverError.errors;\r\n            }\r\n            if(status === 400 || status === 401)\r\n            {\r\n                errorObject.errorAction = \"timeoutUser\";\r\n            }\r\n            else if(status === 403)\r\n            {\r\n                errorObject.errorAction = \"userWithoutCredentials\";\r\n            }\r\n            return errorObject;\r\n        },\r\n        \r\n        populateLocalErrorMessage:function(status, statusText, localError)\r\n        {\r\n            var errorObject = {};\r\n            errorObject.status = status;\r\n            errorObject.statusText = statusText;\r\n            errorObject.code = status;\r\n            switch (status)\r\n            {\r\n                case 0:\r\n                    return this.getNonHTTPStatusError(\"timeout\");\r\n                    break;\r\n                case 400:\r\n                    errorObject.code = 400;\r\n                    errorObject.displayMessage = \"An error has occured with the login\";\r\n                    errorObject.displayTitle = statusText;\r\n                    errorObject.errorAction = \"timeoutUser\";\r\n                    break;\r\n                case 401:\r\n                    errorObject.displayMessage = \"Unauthorised response\";\r\n                    errorObject.displayTitle = \"Not a valid login\";\r\n                    // User not authorised or hasn't got the correct credentials - therefore not authorise \r\n                    //errorProperties.errorAction = \"revokeUser\";\r\n                    /////*******TEMPORARY********///////\r\n                    //Set as a timeout as this error is being returned from WebAPI if user token invalid\r\n                    errorObject.errorAction = \"timeoutUser\";\r\n                    break;\r\n                case 403: // unauthorised?\r\n                    errorObject.displayMessage = \"You are not authorised to view this page\";\r\n                    errorObject.displayTitle = \"Invalid credentials\";\r\n                    // 403 is a user trying to access a route/call that they don't have access to view\r\n                    errorObject.errorAction = \"userWithoutCredentials\";\r\n                    break;\r\n                default:\r\n                    console.log(\"500 - 404 - 406 - 422\");\r\n                    errorObject.displayMessage = statusText;\r\n                    errorObject.displayTitle = \"An error has occured\";\r\n                    errorObject.status = status;\r\n                    errorObject.statusText = statusText;\r\n                    break;\r\n            }\r\n            return errorObject;\r\n        },\r\n        \r\n        getNonHTTPStatusError: function(exception)\r\n        {\r\n            var displayMessage = \"This page is currently unavailable.\",\r\n                displayTitle = \"An unknown error has occured\",\r\n                statusText = exception,\r\n                status = 0;\r\n            switch (exception)\r\n            {\r\n                case 'parsererror':\r\n                    displayTitle = \"Error: Unexpected data.\";\r\n                    displayMessage = \"The data cannot be read\";\r\n                    break;\r\n                case 'timeout':\r\n                    displayTitle = \"The data call has timed out, please try again\";\r\n                    break;\r\n                case 'abort':\r\n                    displayTitle = \"The data call has aborted, please try again\";\r\n                    break;\r\n                case 'error':\r\n                    displayTitle = \"The data call has failed, this may be due to a lost connection. Please check your network or wifi settings and try again\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            return {status: status, displayMessage: displayMessage, displayTitle: displayTitle, statusText: statusText, code:status};\r\n        },\r\n        \r\n        getCustomDataError:function(jqXHR, exception)\r\n        {\r\n            var error = this.getStatusError(jqXHR, exception);\r\n            if(error.status === 400 || error.status === 401 || error.status === 403)\r\n            {\r\n                //console.log(\"is a timeout or unauthorised\");\r\n                this.loadError(error);\r\n            }\r\n            return new ErrorModel(error, {parse:true});\r\n        },\r\n                           \r\n        \r\n        initiateLogout:function()\r\n        {\r\n            window.location = \"../login/index.html#/logout\";\r\n        },\r\n        \r\n        dataLogout:function()\r\n        {\r\n            this.clearUser();\r\n            this.get('login').isLogout = false;\r\n            this.get('login').resetDefaults();\r\n            this.get('login').revokeAuthorization();\r\n        },\r\n        \r\n        \r\n        /***\r\n         * Reset user object on logout\r\n         ***/\r\n        clearUser:function()\r\n        {\r\n            //this.set('user',null);\r\n            this.set('userId', null);\r\n            //this.set('user', new UserModel());\r\n            this.set('userSession',null);\r\n            this.set('userSession', new UserSessionModel());\r\n           // this.set('user', this.get('userSession').get('user'));\r\n        },\r\n        \r\n        revokeUser:function()\r\n        {\r\n            //console.log(\"revoke user\");\r\n            this.clearUser();\r\n            this.get('login').revokeAuthorization();\r\n            this.trigger('store:revokeUser');\r\n            window.location = \"../login/index.html#/login\";\r\n        },\r\n        \r\n        \r\n        returnToDefaultPage:function()\r\n        {\r\n            window.location = \"../login/index.html#/selectRole\";\r\n        },\r\n        \r\n        handleErrorAction:function(statusError)\r\n        {\r\n            switch(statusError.get('errorAction')){\r\n                case \"timeoutUser\":\r\n                    window.localStorage.setItem('timeout', Date.now());\r\n                    window.localStorage.removeItem('timeout');\r\n                    this.revokeUser();\r\n                    break;\r\n                case \"revokeUser\":\r\n                    this.revokeUser();\r\n                    break;\r\n                case \"userWithoutCredentials\":\r\n                    this.returnToDefaultPage();\r\n                    break;\r\n                default:\r\n                    //\r\n                    break;\r\n            }\r\n        }\r\n\r\n    });\r\n    return dataStoreModel;\r\n});\r\n\n","define('js/data/models/tree/BaseTreeModel',[\r\n    'js/data/requestFactory',\r\n    'js/data/models/BaseModel',\r\n    'js/data/collections/BaseCollection'\r\n    \r\n], function(requestFactory, BaseModel, BaseCollection) {\r\n\r\n    /**\r\n     * @class BaseTreeModel contains common data for all tree items\r\n     * the foundation parameters to initialise a treeview. All unique models base \r\n     * these attributes by only adding attributes. The BaseTreeModel is reccursive,\r\n     * Each item in the children collection is a BaseTreeCollection.\r\n     * The initial BaseTreeModel is considered the root of the tree. from that root\r\n     * all it's children and their children are from the inital item. ie; it is assumed\r\n     * that for a recursive tree to exist, the tree must have at least 1 item, \r\n     * that item is a BaseTreeModel\r\n     */\r\n    var BaseTreeModel = BaseModel.extend({\r\n        type:\"Tree\",\r\n        childrenLoaded:false,\r\n        parentModel:null,\r\n        rootModel:null,\r\n        additionalIds:null,\r\n        idAttribute:'itemId',\r\n        requiresReload:false,\r\n        defaults:{\r\n            itemId: null,\r\n            displayName: \"\",\r\n            genericCount:0,\r\n            parentId:null,\r\n            depth: 0,\r\n            childrenCount: 0,\r\n            canEdit:true,\r\n            isOpen:false,\r\n            isSelected:false,\r\n            children: null\r\n        },\r\n        \r\n        initialize:function()\r\n        {\r\n            this.listenTo(this, 'change:isSelected', this.onItemSelected, this);\r\n            BaseModel.prototype.initialize.apply(this);\r\n        },\r\n       url:function(){\r\n           // to be overriden. Each treeview will contain a different model with unique\r\n           // params and unique loading API criterior.\r\n           var jsonURL = \"../testjson/tree\";\r\n           if(this.loadParams.loadType === \"getChildren\"){\r\n               jsonURL += \"-item-\" + this.loadParams.itemId\r\n           }\r\n           jsonURL +=  \".json\";\r\n           console.log(\"json static url = \" + jsonURL); \r\n           return jsonURL;\r\n        },\r\n        parse:function(response)\r\n        {\r\n            if(!response.children)\r\n            {\r\n                response.children = [];\r\n            }\r\n            return this.parseChildren(response);\r\n        },\r\n        \r\n        parseChildren:function(response)\r\n        {\r\n            // additional to backbone's default parse.\r\n            // The API in which the models were designed within use lazy loading,\r\n            // ie; only request 20 items at a time with limit and offset.\r\n            // The children are added to the model's additional id's so the view \r\n            // can handle lazy loading logic\r\n            if(this.get('children') && this.get('children').length > 0)\r\n            {\r\n                this.additionalIds = _.pluck(response.children, 'itemId');\r\n                this.get('children').add(response.children, {parse:true});\r\n                response = _.omit(response, 'children');\r\n            }\r\n            else\r\n            {\r\n                response.children = new BaseCollection(response.children, {\r\n                    parse: true, model:this.constructor\r\n                });\r\n            }\r\n            return response;\r\n        },\r\n        \r\n        resetChildren:function()\r\n        {\r\n            if(this.get('children') !== null){\r\n                this.get('children').reset();\r\n                this.childrenLoaded = false;\r\n            }\r\n        },\r\n        \r\n        getLoadOffset:function()\r\n        {\r\n            // lazy loading utility to calculate the current offset\r\n            if(this.get('children') !== null)\r\n            {\r\n                var lastPos = this.get('children').length;\r\n                return Math.ceil(lastPos/this.rootModel.get('limit')) + 1;\r\n            }\r\n            return 1;\r\n        },\r\n        \r\n        onLoadSuccess:function()\r\n        {\r\n            // override backbone's onLoadSuccess to check if all children have\r\n            // been loaded (because of lazy loading) and to initialise it's parent\r\n            this.setParentModels();\r\n            if(this.get('children').length === this.get('childrenCount'))\r\n            {\r\n                this.childrenLoaded = true;\r\n            }\r\n        },\r\n        \r\n        setParentModels:function()\r\n        {\r\n            var that = this;\r\n            _.each(this.get('children').models, function(mod)\r\n            {\r\n                mod.parentModel = that;\r\n                mod.rootModel = that.rootModel;\r\n            });\r\n        },\r\n        \r\n        toggleOpenItemChildren:function(open)\r\n        {\r\n            _.each(this.get('children').models, function(mod)\r\n            {\r\n                mod.set('isOpen', open);\r\n            });\r\n        },\r\n        \r\n        toggleOpenNestedChildren:function(open)\r\n        {\r\n            this.set('isOpen', open);\r\n            _.each(this.get('children').models, function(mod)\r\n            {\r\n                mod.toggleOpenNestedChildren(open);\r\n            });\r\n        },\r\n        \r\n        onItemSelected:function()\r\n        {\r\n            //to be overridden - should be handled separately for individual models\r\n        },\r\n        \r\n        getIsAlreadyLoaded:function()\r\n        {\r\n            return false;//this.get('isLoaded');\r\n        },\r\n        \r\n        destroy:function(loadOptions)\r\n        {\r\n            // API delete the item from the DB\r\n            this.loadParams.loadType = \"delete\"; // needed to determine URL's\r\n            BaseModel.prototype.destroy.apply(this, [loadOptions]);\r\n        },\r\n        getTreeItem:function(itemId)\r\n        {\r\n            if(this.get('itemId') === itemId)\r\n            {\r\n                return this;\r\n            }\r\n            return this.getChildMatch(this.get('children'), 'children', 'itemId', itemId);\r\n        },\r\n        nestedModels:{\r\n            children: BaseCollection\r\n        }\r\n    });\r\n    return BaseTreeModel;\r\n});\r\n\r\n\n","define('dataStore',[\r\n    'js/data/dataStore',\r\n    'js/data/models/tree/BaseTreeModel'\r\n\r\n], function(dataStore, treeModel) {\r\n\r\n    var ExampleDataStore = dataStore.extend({\r\n        \r\n        defaults:{\r\n           tree:null\r\n        },\r\n        \r\n        initialize: function() {\r\n            dataStore.prototype.initialize.apply(this);\r\n            this.set('tree', new treeModel());\r\n        }\r\n    });\r\n    return new ExampleDataStore();\r\n});\r\n\n","define('js/router',[\r\n    'jquery',\r\n    'underscore',\r\n    'backbone',\r\n    'dataStore'\r\n\r\n], function($, _, Backbone, dataStore) {\r\n    var BaseRouter = Backbone.Router.extend({\r\n       currentView: null,\r\n\r\n       /**\r\n         * Override default Router.route method to all args to be passed to methods in routes\r\n         * @param {String} modelId e.g. \"qualification\"\r\n         *\r\n         */ \r\n              \r\n        initialize: function() {\r\n           // this.initialiseHeaderView();\r\n            // remover 'initialising-application-wrapper' selector from body\r\n           // document.body.className = document.body.className.replace(\"initialising-application-wrapper\",\"\");\r\n        },\r\n        execute: function(callback, args, name) {\r\n            // catch the execute function which is used in backbone's router to \r\n            // execute a view. \r\n            // Before a view is executed check the datastore flag 'hasCheckedLocalStorage'\r\n            if (!dataStore.hasCheckedLocalStorage) {\r\n                // If it hasn't been set, then the router must wait until \r\n                // the application has had chance to apply the session storage \r\n                // checks. This is done by adding a temporary listener and storing \r\n                // the execute functions arguments\r\n                this.executeArgument = [callback, args, name];\r\n                this.listenTo(dataStore, 'store:storageInitialised', this.onDataStoreInitialised, this);\r\n                return false;\r\n            }else{\r\n                // The application has checked the storage, carry on.\r\n                if (callback) callback.apply(this, args);\r\n            }\r\n        },\r\n        onDataStoreInitialised: function()\r\n        {\r\n            // The datastore has initialised and complete it's storage checks.\r\n            // nullify all temporary listeners and cariables and re-request the \r\n            // router's execute function.\r\n            this.stopListening(dataStore, 'store:storageInitialised');\r\n            this.execute(this.executeArgument[0], this.executeArgument[1], this.executeArgument[2]);\r\n            this.executeArgument = null;\r\n        },\r\n       /* initialiseHeaderView: function() {\r\n             //can be overriden in application router\r\n             this.headerView = new HeaderView();\r\n             //this.isHeaderInitialised = true;\r\n             this.listenTo(this.headerView, 'headerview:NavigationUpdate', this.onHeaderUpdate, this);\r\n        },*/\r\n        /*onHeaderUpdate:function(){\r\n            // the header navigation has re-rendered and may have altered in size.\r\n            // therefore, inform the current PageView. Each View that extends PageView \r\n            // can determine a new height once it has recieved the update\r\n            if(this.currentView !== null){\r\n                if(typeof this.currentView.onHeaderUpdate === \"function\"){\r\n                    this.currentView.onHeaderUpdate();\r\n                }\r\n            }\r\n        },*/\r\n        \r\n        showApplicationSetup:function()\r\n        {\r\n            console.log(\"SHOW APPLICATION SETUP\")\r\n            if (this.currentView !== null)\r\n            {\r\n                this.currentView.destroy();\r\n            }\r\n            this.currentView = null;\r\n            this.currentView = new ApplicationSetUpPageView();\r\n            this.listenTo(dataStore, 'setUp:complete', this.onInitialSetUpComplete);\r\n            this.currentView.render();\r\n        },\r\n        \r\n        onInitialSetUpComplete:function(event)\r\n        {\r\n            window.location.hash = this.nextLocation;\r\n        },\r\n        \r\n        switchView: function(view, viewType, viewModel, ignoreUserSessionLoad)\r\n        {\r\n          //  if (dataStore.initialSetUpLoadComplete || ignoreUserSessionLoad)\r\n            //{\r\n                // evaluate string arguments\r\n                View = this.referenceView(view);\r\n                if (!View)\r\n                {\r\n                    throw new Error(\"Invalid view\");\r\n                }\r\n\r\n                if (this.currentView !== null)\r\n                {\r\n                    this.currentView.destroy();\r\n                }\r\n                this.currentView = null;\r\n                //\r\n                var viewInitObject = {viewType: viewType};\r\n                if (viewModel !== null) {\r\n                    viewInitObject.model = viewModel;\r\n                }\r\n                this.currentView = new View(viewInitObject);\r\n                // reset the scroll position of the whole HTML page\r\n                // could potentially remember the scroll position and if coming back to a previous page set the scroll - ideal for large lists where you scroll all the way down to an item and then click it to view more details, then return back to list\r\n                document.body.scrollTop = document.documentElement.scrollTop = 0;\r\n                this.currentView.render();\r\n            //} \r\n           /* else\r\n            {\r\n                this.nextLocation = window.location.hash;\r\n                window.location.hash = '/setup';\r\n            }*/\r\n        },\r\n        \r\n        /*\r\n         * Check if view exists to ensure eval method can't be attacked with malicious JS string\r\n         */\r\n        viewExists: function(View)\r\n        {\r\n            if (typeof View === 'string' && this.switchableViews.indexOf(unescape(View)) > -1)\r\n            {\r\n                return true;\r\n            }\r\n            else\r\n            {\r\n                throw new Error(\"View not found\");\r\n                return false;\r\n            }\r\n        },\r\n\r\n        parseQueryString:function(queryString){\r\n            var params = {};\r\n            if(queryString){\r\n                _.each(\r\n                    _.map(decodeURI(queryString).split(/&/g),function(el,i){\r\n                        var aux = el.split('='), o = {};\r\n                        if(aux.length >= 1){\r\n                            var val = undefined;\r\n                            if(aux.length == 2)\r\n                                val = aux[1];\r\n                            o[aux[0]] = val;\r\n                        }\r\n                        return o;\r\n                    }),\r\n                    function(o){\r\n                        _.extend(params,o);\r\n                    }\r\n                );\r\n            }\r\n            return params;\r\n        },\r\n        referenceView: function(View)\r\n        {\r\n            if (typeof View === 'function')\r\n                return View;\r\n            if (this.viewExists(View))\r\n                return eval(View);\r\n            return false;\r\n        }\r\n    })\r\n    return BaseRouter;\r\n});\n","define('js/views/BaseView',[\r\n    'jquery',\r\n    'underscore',\r\n    'backbone'\r\n    \r\n], function($, _, Backbone) {\r\n    \r\n    var BaseView = Backbone.View.extend({\r\n        baseItemClickDebounceTimeout:null,\r\n        baseItemClickDebounceTime:250,\r\n        /**\r\n         * Renders view and returns reference to itself, postRender will be called after page has rendered\r\n         * @override\r\n         */\r\n        render: function() {\r\n            _.defer(_.bind(this.postRender, this));\r\n        },\r\n        \r\n                \r\n        /**\r\n         * Called after completion of render - use when functionality requires completion of page render (e.g. CSS etc)\r\n         */\r\n        postRender: function() {\r\n            // to be overidden\r\n        },\r\n                \r\n        /**/\r\n        baseOnItemClickedHandler:function(event){\r\n            var that = this;\r\n            if(this.baseItemClickDebounceTimeout){\r\n                this.baseClearItemClickedDefer();\r\n                this.onItemDoubleClickedHandler(event);\r\n                return false;\r\n            }\r\n            this.baseItemClickDebounceTimeout = setTimeout(function(){\r\n                that.baseItemClickedDefer(event);\r\n            },that.baseItemClickDebounceTime);\r\n        },\r\n        baseClearItemClickedDefer:function(){\r\n            clearTimeout(this.baseItemClickDebounceTimeout);\r\n            this.baseItemClickDebounceTimeout = null;\r\n        },\r\n        baseItemClickedDefer:function(proxiedEvent){\r\n            this.baseClearItemClickedDefer();\r\n            this.onItemSingleClickedHandler(proxiedEvent);\r\n        },\r\n        onItemSingleClickedHandler:function(proxiedEvent)\r\n        {\r\n            // to be overriden\r\n        },\r\n        onItemDoubleClickedHandler:function(proxiedEvent)\r\n        {\r\n            // to be overriden\r\n        },\r\n                \r\n        /**\r\n         * Appends a list of sub views to specified element\r\n         *\r\n         * @param {HTMLElement} el DOM element to append view to\r\n         * @param {Array} models array of data objects to populate views\r\n         * @param {Class} SubView reference to a Backbone view class- a new instance of this class with be appended for each model in list\r\n         * @returns {Array} subviews created\r\n         */\r\n        appendSubViewsToElement: function(el, models, SubView, args, events, subViewOptions)\r\n        {\r\n            var subViews = [],\r\n                options = subViewOptions !== undefined? subViewOptions : {};\r\n            _.each(models, function(model) {\r\n                options.model = model\r\n                var subView = new SubView(options);\r\n                subViews.push(subView);\r\n                subView.render();\r\n                el.append(subView.el);\r\n            });\r\n            return subViews;\r\n        },\r\n        destroyAppendedViews: function(subViews)\r\n        {\r\n            var subView;\r\n            while (subViews.length > 0) {\r\n                subView = subViews.shift();\r\n                subView.destroy();\r\n                subView = null;\r\n            }\r\n            subViews = null\r\n            return [];\r\n        },\r\n        stripDataIdFromElementId:function(element, delimiter){\r\n            if(!delimiter)\r\n                delimiter = \"-\";\r\n            var idStrings = element.attr(\"id\").split(delimiter);\r\n            return idStrings[idStrings.length - 1];\r\n        },\r\n        getNoDataMessageHTML:function(msg){\r\n            var html = \"<div class='no-data'>\";\r\n            html += msg;\r\n            html += \"</div>\";\r\n            return html;\r\n        },\r\n        getDataErrorMessageHTML:function(msg, title){\r\n            var html = \"<div class='data-error'>\";\r\n            if(title !== null)\r\n                html += \"<h5>\" + title + \"</h5>\";\r\n            html += msg;\r\n            html += \"</div>\";\r\n            return html;\r\n        },\r\n      \r\n        \r\n        \r\n        setContentsHeightFromParentOffset:function(parentJqueryEL, contentJqueryEL, cssSelector, includeBottomPadding){\r\n            if(!cssSelector)\r\n                cssSelector = \"height\";\r\n            if(!includeBottomPadding)\r\n                includeBottomPadding = true;\r\n            var availableContentHeight = Math.floor(parentJqueryEL.outerHeight() - this.getContentsOffsetFromParentOffset(parentJqueryEL, contentJqueryEL));\r\n            if(includeBottomPadding)\r\n                availableContentHeight -= Number(contentJqueryEL.css('padding-bottom').replace(\"px\", \"\"));\r\n            contentJqueryEL.css(cssSelector,  availableContentHeight);\r\n        },\r\n        getContentsOffsetFromParentOffset:function(parentJqueryEL, contentJqueryEL){\r\n            return Math.floor(contentJqueryEL.offset().top - parentJqueryEL.offset().top);\r\n        },  \r\n        onUndevelopedMessageAlert:function()\r\n        {\r\n            this.onAlert(\"This functionality has not yet been developed\", \"Not Available\");\r\n        },\r\n        \r\n        enableActionButton:function(buttonEl)\r\n        {\r\n            buttonEl.removeClass('disabled');\r\n            buttonEl.removeProp('disabled');\r\n        },\r\n        \r\n        disableActionButton:function(buttonEl)\r\n        {\r\n            buttonEl.addClass('disabled');\r\n            buttonEl.prop('disabled', true);\r\n        },\r\n        \r\n        \r\n        \r\n        destroyModel: function() {\r\n            if(this.model){\r\n                this.model.stopListening();\r\n                this.model = null;\r\n            }\r\n        },\r\n        destroyView: function() {\r\n            this.remove();\r\n            this.unbind();\r\n        },\r\n        destroyEl: function() {\r\n            this.$el.empty();\r\n            this.$el.remove();\r\n        },\r\n        destroy: function() {\r\n            this.destroyModel();\r\n            this.destroyView();\r\n            this.destroyEl();\r\n            this.baseClearItemClickedDefer(); \r\n            if (this.onDestroy) \r\n            {\r\n                this.onDestroy();\r\n            }\r\n        }\r\n    });\r\n    \r\n    return BaseView;\r\n});\r\n\n","define('js/views/BaseLoadingView',[\r\n    'dataStore',\r\n    'js/views/BaseView',\r\n    'spinner'\r\n    \r\n], function(dataStore, BaseView, Spinner) {\r\n    var BaseLoadingView = BaseView.extend({\r\n        dataRequested:false,\r\n        title:\"\",\r\n        viewType:\"\",\r\n     //   loaderElId:el,\r\n        initialLoadRenderRenderComplete: false,\r\n        showSpinner: true,\r\n        spinnerCurrentlyVisable: false,\r\n        /**\r\n         * Spinning loader config options\r\n         */\r\n        loaderOptions: {\r\n            lines: 8, // The number of lines to draw\r\n            length: 0, // The length of each line\r\n            width: 7, // The line thickness\r\n            radius: 10, // The radius of the inner circle\r\n            corners: 20, // Corner roundness (0..1)\r\n            rotate: 0, // The rotation offset\r\n            color: '#008080', // #rgb or #rrggbb00193C\r\n            speed: 1, // Rounds per second\r\n            trail: 60, // Afterglow percentage\r\n            shadow: false, // Whether to render a shadow\r\n            hwaccel: false, // Whether to use hardware acceleration\r\n            className: 'spinner', // The CSS class to assign to the spinner\r\n            zIndex: 2e9 // The z-index (defaults to 2000000000)\r\n        },\r\n                \r\n        initialize: function(options) {\r\n            BaseView.prototype.initialize.apply(this);\r\n            this.viewNumber = Math.floor(Math.random() * (10000000 - 100 + 1)) + 100;\r\n            if(!this.loaderElId){\r\n                this.loaderElId = this.el;\r\n            }\r\n            this.jqueryEL = $(this.el);\r\n            //\r\n            if (this.name){\r\n                this.loaderOptions.className = this.loaderOptions.className + \"-\" + this.name;\r\n            }\r\n        },\r\n        \r\n\r\n                \r\n       /* destroy: function() {\r\n            // destroy spinner\r\n            BaseView.prototype.destroy.apply(this);\r\n        },*/\r\n        \r\n        render: function() {\r\n            if(!this.initialLoadRenderRenderComplete){\r\n                this.initialLoadRenderRenderComplete = true;\r\n                this.initialLoadRender();\r\n            }\r\n            if (!this.dataRequested)\r\n            {\r\n                // show loading spinner if view has loadData method\r\n                this.showLoader();\r\n                // trigger data load\r\n                this.dataRequested = true;\r\n                var queue = [];\r\n                this.requestData(queue);\r\n            }\r\n            else\r\n            {\r\n                // show page content\r\n                this.removeSpinner();\r\n                this.renderViewContent();\r\n                this.initialiseLoaderElIdReference();\r\n            }\r\n            BaseView.prototype.render.apply(this);\r\n            return this;\r\n        },\r\n        \r\n        requestData:function(queue)\r\n        {   \r\n            dataStore.checkUserLoad(queue)\r\n            if(queue.length > 0)\r\n            {\r\n                dataStore.loadData(queue);\r\n            }\r\n            else\r\n            {\r\n                this.render();\r\n            }\r\n        },\r\n        \r\n        initialLoadRender: function() {\r\n            // to be overidden\r\n        },\r\n        renderViewContent: function() {\r\n            // to be overidden\r\n        },\r\n                \r\n        // can be overidden\r\n        initialiseLoaderElIdReference:function(){\r\n            this.loaderElId = $(this.loaderElId);\r\n        },    \r\n        showLoader: function()\r\n        {\r\n            if(this.showSpinner){\r\n                this.removeSpinner();\r\n                var spinner = new Spinner(this.loaderOptions).spin(),\r\n                    spinnerClass = \".\" + this.loaderOptions.className;\r\n                this.spinnerCurrentlyVisable = true;\r\n                $(this.loaderElId).append(spinner.el);\r\n                this.spinnerEL = $(this.loaderElId).find(String(\".\" + this.loaderOptions.className));\r\n                this.positionSpinner();\r\n                \r\n            }\r\n        },\r\n        /**\r\n         *Remove loading spinner\r\n         */\r\n        removeSpinner:function()\r\n        {\r\n            if (this.spinnerEL && this.spinnerCurrentlyVisable){\r\n                this.spinnerEL.empty().detach();\r\n                this.spinnerCurrentlyVisable = false;\r\n            }\r\n        },\r\n         /**\r\n         *Update position of loading spinner\r\n         */\r\n        positionSpinner: function()\r\n        {\r\n            // find spinner if present\r\n            if (this.spinnerEL && this.showSpinner)\r\n            {\r\n                this.spinnerEL.css(\"position\", \"absolute\");\r\n                var x = Math.floor(($(this.loaderElId).outerWidth() / 2) + $(this.loaderElId).offset().left);\r\n                this.spinnerEL.css(\"left\", x + \"px\");\r\n                var y = Math.floor(($(this.loaderElId).outerHeight() / 2) + $(this.loaderElId).offset().top) + this.getScrollTop();\r\n                this.spinnerEL.css(\"top\", y + \"px\");\r\n            }\r\n        },\r\n        /*\r\n        setContentsHeightFromParentOffset:function(parentJqueryEL, contentJqueryEL, cssSelector){\r\n            if(!cssSelector)\r\n                cssSelector = \"height\";\r\n            var availableContentHeight = Math.floor(parentJqueryEL.outerHeight() - (contentJqueryEL.offset().top - parentJqueryEL.offset().top));\r\n            contentJqueryEL.css(cssSelector,  availableContentHeight);\r\n        },\r\n        getContentsOffsetFromParentOffset:function(parentJqueryEL, contentJqueryEL){\r\n            return Math.floor(contentJqueryEL.offset().top - parentJqueryEL.offset().top);\r\n        },     \r\n        */\r\n        /**\r\n         * return scroll y position\r\n         * @returns {Number}\r\n         */\r\n        getScrollTop: function() {\r\n            if (typeof pageYOffset !== 'undefined') {\r\n                //most browsers\r\n                return pageYOffset;\r\n            }\r\n            else {\r\n                var B = document.body, //IE 'quirks'\r\n                    D = document.documentElement; //IE with doctype\r\n                D = (D.clientHeight) ? D : B;\r\n                return D.scrollTop;\r\n            }\r\n        },\r\n        \r\n        onDataLoadError: function(event, jqXHR, settings, exception)\r\n        {\r\n            //console.log(\"error caught in page view\");\r\n            if(this.removeSpinner)\r\n            {\r\n                this.removeSpinner();\r\n            }\r\n            var errorModel = dataStore.getCustomDataError(jqXHR, exception);\r\n            this.showLoadErrorMessage(errorModel);\r\n        },\r\n        \r\n        showLoadErrorMessage:function()\r\n        {\r\n            //to be overridden\r\n        }\r\n        \r\n    });\r\n    return BaseLoadingView;\r\n});\r\n\n","define('js/views/PageView',[\r\n    'dataStore',\r\n    'js/views/BaseLoadingView'\r\n    \r\n], function(dataStore, BaseLoadingView) {\r\n    var PageView = BaseLoadingView.extend({\r\n        el:'#pageContent',\r\n       // stageHeight:null,\r\n        contentPadding:null,\r\n        footerHeight:0,\r\n        // specifiy el for loader to be added to\r\n        loaderElId: '#pageContent',\r\n                \r\n        initialize: function(options) {\r\n            BaseLoadingView.prototype.initialize.apply(this);\r\n            dataStore.isLoginPage = false;\r\n            this.events = _.extend({}, BaseLoadingView.prototype.events, this.events);\r\n            this.listenTo(dataStore, 'store:update', this.onDataLoad, this);\r\n            this.listenTo(dataStore, 'store:error', this.onDataLoadError, this);\r\n            //\r\n            this.listenTo(dataStore.get('screenSizeDetection'), 'change:stageHeight', this.onResize, this);\r\n            //$(window).on('resize', _.bind(this.onResize, this));\r\n        },\r\n        \r\n        destroyDataStoreListeners: function() {\r\n            this.stopListening(dataStore, 'store:update');\r\n            this.stopListening(dataStore, 'store:error');\r\n            this.stopListening(dataStore.get('screenSizeDetection'), 'change:stageHeight');\r\n            this.stopListening(dataStore, 'error:login');\r\n        },\r\n        destroyView: function() {\r\n            this.unbind();\r\n            this.undelegateEvents();\r\n            this.stopListening();\r\n        },\r\n        destroyEl: function() {\r\n            this.$el.empty();\r\n        },\r\n        destroy: function() {\r\n            this.destroyDataStoreListeners();\r\n            BaseLoadingView.prototype.destroy.apply(this);\r\n        },\r\n        \r\n        onDataUpdate:function(event)\r\n        {\r\n            this.render();\r\n        },\r\n        \r\n        renderViewContent: function() {\r\n            this.renderPageContent();\r\n            if(dataStore.get('screenSizeDetection').get('stageHeight') !== null && this.contentPadding !== null)\r\n            {\r\n                this.setPageContentHeight();\r\n            }else{\r\n                this.onResize();\r\n            }\r\n        },   \r\n        renderPageContent: function() {\r\n            // to be overidden\r\n        },\r\n                \r\n        // can be overidden\r\n    /*    initialiseLoaderElIdReference:function(){\r\n            this.loaderElId = $(this.loaderElId);\r\n        },*/\r\n        \r\n        onResize: function()\r\n        {\r\n            this.contentPadding = Number(this.jqueryEL.css('padding-top').replace(\"px\", \"\")) + Number(this.jqueryEL.css('padding-bottom').replace(\"px\", \"\"));\r\n            this.footerHeight = this.getFooterHeight();\r\n            this.setPageContentHeight();\r\n            this.positionSpinner();\r\n        },\r\n        onHeaderUpdate: function()\r\n        {\r\n            // can be overriden for complex pages that maybe rely on offsets of \r\n            // page elements to determine the calculated height. \r\n            this.onResize();\r\n        },\r\n        setPageContentHeight:function()\r\n        {\r\n            var availablePageHeight = Math.floor(dataStore.get('screenSizeDetection').get('stageHeight') - (this.jqueryEL.offset().top +  this.contentPadding)) - this.footerHeight;\r\n            this.jqueryEL.css(\"min-height\",  availablePageHeight);\r\n            this.setAdditionalPageItemsHeight(availablePageHeight);\r\n        },\r\n     \r\n        setAdditionalPageItemsHeight:function(availablePageHeight)\r\n        {\r\n            // can be used to set further DOM items once the availablePageHeight has been calculated\r\n        },\r\n        \r\n        getFooterHeight: function()\r\n        {\r\n            var footers = document.getElementsByTagName('footer');\r\n            if(footers.length){\r\n                return footers[0].offsetHeight;\r\n            }else{\r\n                return 0;\r\n            }\r\n        },\r\n        \r\n        onDataLoad: function(model)\r\n        {\r\n            this.render();\r\n        },\r\n        \r\n        onDataLoadError: function()\r\n        {\r\n            if(this.removeSpinner)\r\n            {\r\n                this.removeSpinner();\r\n            }\r\n            var errorModel = dataStore.get(\"dataError\");\r\n            //only show alert if not 400 error\r\n            //400 are handled with a login popup\r\n            /*if(errorModel.get('status') !== 400 && errorModel.get('status') !== 401)\r\n            {*/\r\n             //   this.onAlert(errorModel.get(\"displayTitle\")+\"<br>\"+errorModel.get(\"displayMessage\"), \"Data error\");\r\n            //}\r\n        }\r\n      \r\n    });\r\n    return PageView;\r\n});\r\n\n","\ndefine('text!js/views/sectionsStack/SectionsStackLayout.html',[],function () { return '<article id=\"<%=articleId%>\" class=\"page-container section-stack\">\\r\\n\\r\\n    <header>\\r\\n        <h2><%=pageTitle%></h2>\\r\\n    </header>\\r\\n\\r\\n    <div class=\"grid <%=gridClass%> <%=gridType%>\" data-focused-item-ordinal=\"<%=sectionsStack[currentFocusedIndex].ordinal%>\" data-focused-index=\"<%=currentFocusedIndex%>\">\\r\\n        <% _.each(sectionsStack, function(item, index){ %>\\r\\n        <div class=\"flex-column <%=item.class%>\" data-item-ordinal=\"<%=item.ordinal%>\" data-index=\"<%=index%>\">\\r\\n            <!--<section class=\"section-stack-item\">\\r\\n\\r\\n            </section>-->\\r\\n        </div>\\r\\n        <% }) %>\\r\\n    </div>\\r\\n    \\r\\n</article>';});\n\n","\ndefine('text!js/views/sectionsStack/section/BaseSection.html',[],function () { return '<% if(index > 0) { %>\\r\\n<div class=\"action-button toggle-open-close\" type=\"button\">\\r\\n    <div class=\"arrow closed\"></div>\\r\\n</div>\\r\\n<% } %>\\r\\n<div class=\"section-stack-container\">\\r\\n    <% if(showHeader) { %>\\r\\n    <header></header>\\r\\n    <% } %>\\r\\n    <div class=\"content\"></div>\\r\\n</div>\\r\\n\\r\\n';});\n\n","\ndefine('text!js/views/sectionsStack/section/BaseSectionHeader.html',[],function () { return '<div class=\"cel-title\">\\r\\n    <h3><%=displayName%></h3>\\r\\n</div>';});\n\n","define('js/views/sectionsStack/section/BaseSectionView',[\r\n    'dataStore',\r\n    'js/views/BaseLoadingView',\r\n    'text!js/views/sectionsStack/section/BaseSection.html',\r\n    'text!js/views/sectionsStack/section/BaseSectionHeader.html'\r\n  \r\n], function(dataStore, BaseView, BaseSectionTemplate, BaseSectionHeaderTemplate) {\r\n\r\n    var BaseSectionView = BaseView.extend({\r\n        name:\"BaseSection\",\r\n        title:\"Section title\",\r\n        model:null,\r\n        template:null,\r\n        headerTemplate:null,\r\n        showHeader:true,\r\n        index:null,\r\n        isOpen:false,\r\n        restrictHeightToScreen:false,\r\n        //\r\n        topOffset:0,\r\n        contentOffset:0,\r\n        verticalPadding:0,\r\n        sectionBottomPadding:0,\r\n        sectionEL:null,\r\n        contentEL:null,\r\n        openCloseButtonEL:null,\r\n        openCloseButtonWidth:30,\r\n        rendered:null,\r\n        nullModelMessage:\"There is currently no item selected\",\r\n        //\r\n        initialize: function(options) {\r\n            this.events = _.extend({}, BaseSectionView.prototype.events, this.events);\r\n            BaseView.prototype.initialize.apply(this);\r\n            this.initialiseViewParametersFromOptions(options);\r\n            this.initialiseLayoutTemplate();\r\n            this.initialiseHeaderTemplate();\r\n            if(this.model !== null){\r\n                this.initialiseModelListeners();\r\n            }\r\n        },\r\n        initialiseViewParametersFromOptions:function(options)\r\n        {\r\n            if (options.isOpen !== undefined) \r\n            {\r\n                this.isOpen = options.isOpen;\r\n            }\r\n            if (options.showHeader !== undefined) \r\n            {\r\n                this.showHeader = options.showHeader;\r\n            }\r\n            if (options.title !== undefined) \r\n            {\r\n                this.title = options.title;\r\n            }\r\n            if (options.restrictHeightToScreen !== undefined) \r\n            {\r\n                this.restrictHeightToScreen = options.restrictHeightToScreen;\r\n            }\r\n        },\r\n        initialiseLayoutTemplate:function()\r\n        {\r\n            this.template = _.template(BaseSectionTemplate);\r\n        },\r\n        initialiseHeaderTemplate:function()\r\n        {\r\n            this.headerTemplate = _.template(BaseSectionHeaderTemplate);\r\n        },\r\n        events:\r\n        {\r\n            \"click .toggle-open-close\":\"onOpenCloseToggle\"\r\n        },\r\n     \r\n        render: function()\r\n        {\r\n            $(this.el).html(this.template(this.getTemplateData()));\r\n            this.sectionEL = $(this.el).find('.section-stack-container');\r\n            BaseView.prototype.render.apply(this);\r\n        },\r\n        getTemplateData:function(){\r\n            var data = {};\r\n            data.showHeader = this.showHeader;\r\n            data.index = this.index;\r\n            return data;\r\n        },\r\n        postRender:function()\r\n        {\r\n            if(this.index > 0){\r\n                this.openCloseButtonEL  = $(this.el).find('.action-button.toggle-open-close');\r\n                this.openCloseButtonWidth = this.openCloseButtonEL.outerWidth();\r\n            }\r\n            this.contentEL = $(this.el).find('.content').first();\r\n            this.initialiseViewCalculations();\r\n            this.rendered = true;\r\n            if(!this.isOpen){\r\n                this.close();\r\n                if(this.height)\r\n                    this.setHeight(this.height);\r\n            }else{\r\n                this.renderSection();\r\n            }\r\n            //\r\n            var columnEL = document.getElementsByClassName('flex-column')[this.index],\r\n                that = this;\r\n            this.prefixedEventListener(columnEL,\"transitionEnd\",function(e){\r\n                that.onTransistionComplete(e);\r\n            });\r\n        },\r\n        \r\n        prefixedEventListener:function(element, type, callback) {\r\n            var pfx = [\"webkit\", \"moz\", \"MS\", \"o\", \"\"];\r\n            for (var p = 0; p < pfx.length; p++) {\r\n                if (!pfx[p]) type = type.toLowerCase();\r\n                element.addEventListener(pfx[p]+type, callback, false);\r\n            }\r\n        },\r\n        onTransistionComplete:function(event){\r\n            event.stopPropagation();\r\n            this.initialiseViewCalculations();\r\n            if(this.height)\r\n                this.setHeight(this.height);\r\n        },\r\n        initialiseViewCalculations:function()\r\n        {\r\n            this.verticalPadding = Number($(this.el).css('padding-top').replace(\"px\", \"\")) + Number($(this.el).css('padding-bottom').replace(\"px\", \"\"));\r\n            if(this.contentEL.offset().top > 0)\r\n                this.contentOffset = Math.ceil(this.contentEL.offset().top - $(this.el).offset().top);\r\n            this.sectionBottomPadding = Number($(this.sectionEL).css('padding-bottom').replace(\"px\", \"\"));\r\n        },\r\n             \r\n        renderSection:function()\r\n        {   \r\n            if(!this.isOpen)\r\n                this.onOpenCloseToggle();\r\n            this.sectionEL.find('header').html(this.headerTemplate(this.getHeaderTemplateData()));\r\n            this.renderSectionsContent();\r\n            //\r\n            this.initialiseViewCalculations();\r\n            if(this.height)\r\n                this.setHeight(this.height);\r\n            //this.events();\r\n           /* this.events = _.extend({\r\n            }, BaseView.prototype.events, this.events);\r\n            this.delegateEvents();*/\r\n        },\r\n        \r\n        renderSectionsContent:function()\r\n        {\r\n            if(this.model !== null){\r\n                this.contentEL.html(\"Rendered :)\");\r\n            }else{\r\n                this.contentEL.html(this.getNoDataMessageHTML(this.nullModelMessage));\r\n            }\r\n        },\r\n      \r\n\r\n        getHeaderTemplateData:function(){\r\n            var data = {};\r\n            if(this.model !== null){\r\n                data = this.model.toJSON();\r\n            }else{\r\n                data.displayName = this.title;\r\n            }\r\n            return data;\r\n        },\r\n        onDataLoadError:function(event, jqXHR, settings, exception)\r\n        {\r\n            var statusError = dataStore.getCustomDataError(jqXHR, exception);\r\n            // step 1, decide which 'loadType' caused the error, ie loadType:editDescription or editName\r\n            var loadType = settings.loadType;\r\n            // step 2, find the form item view that acts on behalf of the current loadType error from step 1\r\n        },\r\n\r\n        updateModel: function(currentSelectedModel)\r\n        {\r\n            this.destroyModel();\r\n            this.model = currentSelectedModel;\r\n            this.initialiseModelListeners();\r\n            this.renderSection();\r\n        },\r\n        \r\n        onOpenCloseToggle:function(event)\r\n        {\r\n            if(this.isOpen){\r\n                this.isOpen = false;\r\n                this.close();\r\n            }else{\r\n                this.isOpen = true;\r\n                this.open();\r\n                this.renderSection();\r\n            }\r\n            this.trigger('sectionStackView:openClose', this.isOpen? \"open\" : \"close\", this.index);\r\n        },\r\n        close:function()\r\n        {\r\n            //this.openCloseButtonEL.find('.arrow').removeClass('right-rotate').addClass('left-rotate');\r\n            this.openCloseButtonEL.find('.arrow').removeClass('open').addClass('closed');\r\n            this.sectionEL.addClass('closed');\r\n        },\r\n        open:function()\r\n        {\r\n            this.openCloseButtonEL.show();\r\n            //this.openCloseButtonEL.find('.arrow').removeClass('left-rotate').addClass('right-rotate');\r\n            this.openCloseButtonEL.find('.arrow').removeClass('closed').addClass('open');\r\n            this.sectionEL.removeClass('closed');\r\n        },       \r\n        setTopOffset:function(offset){\r\n            this.topOffset = offset;\r\n            $(this.el).css('margin-top', this.topOffset > 0 ? this.topOffset + this.verticalPadding : this.topOffset + \"px\");\r\n        },\r\n        setHeight:function(height){\r\n            this.height = height;\r\n            if(this.rendered){\r\n                var h = this.topOffset > 0 ? this.height - this.verticalPadding : this.height\r\n                var contentHeight = (h - (this.contentOffset + this.verticalPadding));\r\n                if(this.sectionBottomPadding > 0)\r\n                    contentHeight = contentHeight - this.sectionBottomPadding;\r\n                if(this.restrictHeightToScreen){\r\n                    this.sectionEL.css('height', (h - this.verticalPadding) + \"px\");\r\n                    if(this.contentEL){\r\n                        this.contentEL.css('height', contentHeight + \"px\");\r\n                        this.setAdditionalViewItemHeights(contentHeight);\r\n                    }\r\n                }else{\r\n                    this.setAdditionalViewItemHeights(contentHeight);\r\n                }\r\n                \r\n                \r\n                /*if(this.contentEL){\r\n                    this.contentEL.css('height', contentHeight + \"px\");\r\n                    this.setAdditionalViewItemHeights(contentHeight);\r\n                }*/\r\n            }\r\n        },\r\n        setAdditionalViewItemHeights: function(contentHeight){\r\n            // to be overriden\r\n        },\r\n        initialiseModelListeners: function() {\r\n            // to be overriden\r\n        },\r\n        removeModelListeners: function() {\r\n            // to be overriden\r\n        },\r\n        destroyModel: function() {\r\n            if(this.model !== null){\r\n                this.removeModelListeners();\r\n            }\r\n            BaseView.prototype.destroyModel.apply(this);\r\n        },\r\n        destroy:function()\r\n        {\r\n            this.template = null;\r\n            this.name = null;\r\n            this.el = null;\r\n            BaseView.prototype.destroy.apply(this);\r\n        }\r\n    });\r\n    return BaseSectionView;\r\n});\r\n\n","define('js/views/sectionsStack/BaseSectionsStackPageView',[\n    'dataStore',\n    'js/views/PageView',\n    'text!js/views/sectionsStack/SectionsStackLayout.html',\n    'js/views/sectionsStack/section/BaseSectionView'\n    \n], function(dataStore, PageView, LayoutTemplate, BaseSectionView) {\n\n    var BasePageSectionsStackView = PageView.extend({\n        name:\"Base sections stack page view\",\n        articleId:\"basePageSectionsStackContent\",\n        gridClass:\"page-section-stack-grid\",\n        gridType:\"dual-focus\", // dual-focus|| slider\n        currentDefaultFocusedIndex:0,\n        currentFocusedIndex:0,\n        sectionsStack:null,\n        topOffset:0,\n        enableSliding:false,\n        gridEL:null,\n        elementsOffsetY:null,\n        renderedPageContent:false,\n        //\n        initialize: function(options)\n        {\n            PageView.prototype.initialize.apply(this, [options]);\n            dataStore.isLoading = false;\n            this.initialiseLayoutTemplate();\n            this.initialiseModel();\n            this.sectionsStack = [];\n            this.initialiseSectionsStack();\n            //\n            this.listenTo(dataStore.get('deviceDetection'), 'change:screenSize', this.onDeviceDetectionChange, this);\n            this.listenTo(dataStore.get('screenSizeDetection'), 'change:stageWidth', this.onStageWidthResize, this);\n            this.enableSliding = this.getEnableSliding();\n            $(window).on('scroll', _.bind(this.onScroll, this));\n        },\n        initialiseLayoutTemplate:function()\n        {\n            this.template = _.template(LayoutTemplate);\n        },\n        initialiseModel:function()\n        {\n            // to be overrideen\n            //this.model = dataStore...\n        },\n        initialiseSectionsStack:function()\n        {\n            this.sectionsStack.push({\n                view:new BaseSectionView({\n                    isOpen:true,\n                    restrictHeightToScreen:false,\n                    showHeader:false\n                }),\n                class:\"primary\",\n                ordinal: 1\n            });\n            this.sectionsStack.push({\n                view:new BaseSectionView({\n                    isOpen:false,\n                    restrictHeightToScreen:true\n                }),\n                class:\"secondary\",\n                ordinal: 2\n            });\n        },\n        getEnableSliding:function()\n        {\n            if(this.gridType === \"slider\"){\n                return true;\n            }else if(dataStore.get('deviceDetection').get('screenSize') !== \"screenLarge\"){\n                return true;\n            }else if(this.sectionsStack.length > 2){\n                return true;\n            }\n            return false;\n        },\n        setEnableSliding:function(flag)\n        {\n            var hasEnableSlidingChanged = flag !== this.enableSliding;\n            this.enableSliding = flag;\n            if(hasEnableSlidingChanged)\n                this.slideToSection(this.currentFocusedIndex, false);\n        },\n        events:{\n           //\n        },\n        \n        renderPageContent:function(){\n            $(this.el).html(this.template(this.getTemplateData()));\n            this.gridEL = $(this.el).find('.grid.' + this.gridClass);\n            //\n            this.initialiseViewCalculations();\n            this.initialiseSectionsStackViews();\n            //\n            this.renderedPageContent = true;\n            this.delegateEvents();\n        },\n        getTemplateData:function(){\n            var data = {};\n            data.pageTitle = this.name;\n            data.articleId = this.articleId;\n            data.sectionsStack = this.sectionsStack;\n            data.gridClass = this.gridClass;\n            data.gridType = this.gridType;\n            data.currentFocusedIndex = this.currentFocusedIndex\n            return data;\n        },\n             \n        initialiseSectionsStackViews:function()\n        {\n            var that = this;\n            _.each(this.sectionsStack, function(section, index){\n                that.addSectionsStackViewsListeners(section.view, index);\n                //section.view.el = that.gridEL.find('[data-item-ordinal=\"'+section.ordinal+'\"]');// > section.section-stack-item');\n                section.view.setElement(that.gridEL.find('[data-item-ordinal=\"'+section.ordinal+'\"]'));\n                section.view.index = index;\n                section.view.render();\n            });\n        },\n        addSectionsStackViewsListeners:function(sectionView, index)\n        {\n            switch(index){\n                case 0:\n                    this.listenTo(sectionView, 'sectionStackView:itemSelect', this.onSectionItemSelected, this);\n                    break;\n                case 1:\n                    this.listenTo(sectionView, 'sectionStackView:openClose', this.onSectionViewOpenClose, this);\n                    break;\n            }\n        },\n        removeSectionsStackViewsListeners:function(sectionView, index)\n        {\n            switch(index){\n                case 0:\n                    this.stopListening(sectionView, 'sectionStackView:itemSelect', this.onSectionItemSelected);\n                    break;\n                case 1:\n                    this.stopListening(sectionView, 'sectionStackView:openClose', this.onSectionViewOpenClose);\n                    break;\n            }\n        },\n        onHeaderUpdate: function()\n        {\n            this.initialiseViewCalculations();\n            this.setAdditionalPageItemsHeight();\n        },\n        onDeviceDetectionChange:function()\n        {\n            this.initialiseViewCalculations();\n            this.updateNodeDetailsView();\n            this.setAdditionalPageItemsHeight();\n        },\n        initialiseViewCalculations:function()\n        {\n            this.elementsOffsetY = this.gridEL !== null ? Math.ceil($(this.gridEL).offset().top) : 0;\n        },\n                \n        onStageWidthResize: function()\n        {\n            if(this.enableSliding && this.currentFocusedIndex > 0)\n                this.slideToSection(this.currentFocusedIndex, false);\n        },\n\n        setAdditionalPageItemsHeight:function(availablePageHeight)\n        {\n            this.setSectionsStackViewHeights();\n        },\n        setSectionsStackViewHeights:function(scrollTop)\n        {\n            scrollTop = scrollTop === undefined ? $(window).scrollTop() : scrollTop;\n            if(this.renderedPageContent){\n                var h = (dataStore.get('screenSizeDetection').get('stageHeight') - this.elementsOffsetY) + (scrollTop - this.topOffset);\n                this.gridEL.css('min-height', h);\n                _.each(this.sectionsStack, function(section, index){\n                    //if(section.view.restrictHeightToScreen){\n                        section.view.setHeight(h);\n                    //}\n                });\n            }\n        },\n        onScroll: function()\n        {\n            if(this.renderedPageContent){\n                var scrollTop = $(window).scrollTop();\n                this.topOffset = (scrollTop - this.elementsOffsetY);// + this.sectionsStack[this.currentSection].view.verticalPadding;\n                if(this.topOffset < 0)\n                    this.topOffset = 0;\n                var that = this;\n                _.each(this.sectionsStack, function(section, index){\n                    if(section.view.restrictHeightToScreen){\n                        section.view.setTopOffset(that.topOffset);\n                   }\n                });\n                this.setSectionsStackViewHeights(scrollTop);\n            }\n        }, \n        updateNodeDetailsView:function()\n        {\n            this.setEnableSliding(true);\n            //\n            /*\n             * \n             * GUY. Not really sure why this is in to be honest.\n            It seems to cause a bug with the slide stack options. \n            The bug was when the device width went from large to <large and back again.\n            It then wouldn't slide to the appropriate stack ordinal and caused further\n            ugly re-draw problems thereafter. \n            Seemed safer to just set it to always slide as i could figure out why we wouldn't.\n            \n            switch(dataStore.get('deviceDetection').get('screenSize'))\n            {\n                case \"screenSmall\":\n                case \"screenMedium\":\n                    this.setEnableSliding(true);\n                    break;\n                case \"screenLarge\":\n                default:\n                    this.setEnableSliding(false);\n                    break;\n            }\n            */\n        },\n        onSectionViewOpenClose: function(direction, index)\n        {\n            if(index !== 0){\n                if(direction === \"close\"){\n                    this.currentFocusedIndex = index - 1;//this.currentDefaultFocusedIndex;\n                    //\n                }else{\n                    this.currentFocusedIndex = index;\n                }\n            }\n            this.gridEL.removeData('data-focused-item-ordinal');\n            this.gridEL.removeData('data-focused-index');\n            this.gridEL.attr('data-focused-item-ordinal', this.sectionsStack[this.currentFocusedIndex].ordinal);\n            this.gridEL.attr('data-focused-index', this.currentFocusedIndex);\n            if(this.enableSliding){\n                this.slideToSection(this.currentFocusedIndex);\n            }\n        },\n        onSectionItemSelected: function(item, index)\n        {\n            /*if(index === 0){\n                var temporaryModel = new Backbone.Model({ displayName: \"Item \" + item, id:item});\n                this.sectionsStack[1].view.updateModel(temporaryModel);\n            }*/\n        },\n        slideToSection:function(sectionIndex, animate){\n            if(this.renderedPageContent){\n                var gridWidth = this.gridEL.innerWidth(),\n                    scrollPos = gridWidth * sectionIndex;\n                    animate = animate === undefined?true:animate;\n                if(animate){\n                    this.gridEL.animate({scrollLeft: scrollPos});\n                }else{\n                    this.gridEL.scrollLeft(scrollPos);\n                }\n            }\n            \n        },\n        destroyDataStoreListeners: function() {\n            this.stopListening(dataStore.get('deviceDetection'), 'change:screenSize');\n            this.stopListening(dataStore.get('screenSizeDetection'), 'change:stageWidth');\n            PageView.prototype.destroyDataStoreListeners.apply(this);\n        },\n        destroySectionsStackViews:function(){\n            var that = this;\n            _.each(this.sectionsStack, function(section, index){\n                that.removeSectionsStackViewsListeners(section.view, index);\n                section.view.destroy();\n                section.view = null;\n            });\n        },\n        destroySectionsStack:function(){\n            this.destroySectionsStackViews();\n            var sectionStackItem;\n            while (this.sectionsStack.length > 0) {\n                sectionStackItem = this.sectionsStack.shift();\n                sectionStackItem = null;\n            }\n            this.sectionsStack = [];\n        },\n        destroy:function()\n        {\n            this.destroySectionsStack();\n            PageView.prototype.destroy.apply(this);\n        }\n    });\n    return BasePageSectionsStackView;\n});\n\n","\ndefine('text!js/views/tree/TreeView.html',[],function () { return '<%= nodeItemTemplate %>\\r\\n<% if(childrenCount > 0){ %>\\r\\n<ul class=\"tree-node-item-children\"></ul>\\r\\n<% } %>\\r\\n\\r\\n';});\n\n","\ndefine('text!js/views/tree/TreeNodeItem.html',[],function () { return '<div class=\"tree-node-item\" data-id=\"<%=itemId%>\">\\r\\n    <div class=\"cel-depth\" style=\"width: <%= depth * depthIndent %>px\"></div>\\r\\n    <% if(childrenCount > 0){ %>\\r\\n    <div class=\"cel-arrow\">\\r\\n        <div class=\"<% if( isOpen == true ){ %>open<% } else { %>closed<% } %>\"></div>\\r\\n    </div>\\r\\n    <% } %>\\r\\n    <div class=\"cel-display-name active-select-area\">\\r\\n        <%= displayName %>\\r\\n    </div>\\r\\n    <div class=\"cel-generic-count active-select-area\">\\r\\n        <%= genericCount %>\\r\\n    </div>\\r\\n</div>';});\n\n","define('js/views/tree/TreeView',[\r\n    'dataStore',\r\n    'js/views/BaseLoadingView',\r\n    'text!js/views/tree/TreeView.html',\r\n    'text!js/views/tree/TreeNodeItem.html'\r\n\r\n], function(dataStore, BaseLoadingView, TreeTemplate, TreeNodeItem) {\r\n    /**\r\n     * @class The treeView renders upon js/data/models/tree/BaseTreeModel.\r\n     * It has to be assumed that the tree has at least one item, and that is a\r\n     * Model extended from BaseTreeModel. The tree is rendered in a page as one initial\r\n     * TreeView. The model that drives it can contain children, those children are looped\r\n     * and if a child has properties, the treeView will create another instance\r\n     * of itself within itself. Each instance of treeView only concerns itself with the\r\n     * items model and it's children. It doesn't need to know any parental history.\r\n     * TreeView is designed not to be extended. You get unique functionality from unique\r\n     * treeNodeItem's passed in and also from event handlers for every unique instance of an \r\n     * extended BaseTreeModel\r\n     */\r\n    var treeView = BaseLoadingView.extend({\r\n\r\n        tagName: 'li',\r\n        collapseSpeed:250, // animation speed of the tree (ms)\r\n        depthIndent:10, // depth indent. usually multiplied by the depth integer for each model. EG; padding-left = this.model.depth * this.depthIndent + 'px';\r\n        childTreeViews:null,\r\n        nodeItemTemplate:TreeNodeItem, // default node item template that has generic open/close arrow and displayName. Should be overridden to the specific page/model\r\n        nodeItemHeight:30, // The height of the node item once rendered. Used to determine the height of the tree EL while loading\r\n        nodeItemEL:'.tree-node-item', // element that opens/closes and contains the ui nodeTree\r\n        nodeChildrenEL:'.tree-node-item-children', // ui element that contains all the children\r\n        openCloseNodeItem:true, // set to true to toggle open and close of node item. Set to false and node item doesn't open/close\r\n        openCloseArrowOnly:false, // set to true to toggle open and close of node arrow if it has children.\r\n        arrowEL:\".cel-arrow\", // arrow icon element within nodeItem to visualize open and close#\r\n        showArrowEL:true, // display arrow icon element\r\n        loadChildrenInternally:true, // on open of a node, if the item has chldren then an internal load is requested in this tree view instance model. setting this to false will trigger a loadChildren event\r\n        isModelLoading:false,\r\n        // additionalNodeStateParams/Value/Selector are all part of the same group. If Params is Passed in then Value and Selector is passed in\r\n        additionalNodeStateParams:null, // Similar to 'isSelected', the node can have additional states such as 'isAttached'. The Param is included and listened to 'change' within the model\r\n        additionalNodeStateValue:null, // Action to be taken on if the additionalNodeStateParams equals the additionalNodeStateValue in the 'change' handler\r\n        additionalNodeStateSelector:\"\", // CSS selector to be added to the node if additionalNodeStateParams equals the additionalNodeStateValue in the 'change' handler\r\n        //\r\n        additionalModelListenersHandlers:null, // ROUGH  set of listeners to check for changes in the model that should be updated in the tree node\r\n        additionalRenderFunction:null, // \r\n        specifyDepth:true, // A tree call can have a parameter to load only the immediate children of a model or all children. If specifyDepth is set to true, only the immediate children will be loaded. If specifyDepth is false, the whole tree will be loaded in the first call.\r\n        initialize: function(options) {\r\n            BaseLoadingView.prototype.initialize.apply(this);\r\n            if (options || typeof options === 'object') {\r\n                this.options = options;\r\n                this.setOptionParams();\r\n            }else{\r\n                this.template = _.template(TreeTemplate);\r\n            }\r\n            this.treeView = treeView;\r\n            this.childTreeViews = [];\r\n            // When models children change\r\n            this.model.bind('change:children', this.onChildrenLoaded, this);\r\n            this.listenTo(this.model, 'change:isSelected', this.onSelectedStateChange, this);\r\n            this.listenTo(this.model, 'deleteSuccess', this.onItemDelete, this);\r\n            this.listenTo(this.model, 'change:'+this.additionalNodeStateParams, this.onAdditionalNodeStateParamsChange, this);\r\n            // ROUGH\r\n            if(this.additionalModelListenersHandlers && this.additionalModelListenersHandlers.length > 0){\r\n                var that = this;\r\n                _.each(this.additionalModelListenersHandlers, function(obj) {\r\n                    that.listenTo(that.model, obj.listener, obj.handler, that);\r\n                });\r\n            }\r\n            this.model.set('viewReference', this);    \r\n            this.name = \"treeview\";\r\n          //  this.initialiseEvents();\r\n        },\r\n        \r\n        setOptionParams:function(){\r\n            // If a template is not passed in the options, set the template to the default tree template\r\n            this.template = this.options.template === undefined ? _.template(TreeTemplate) : _.template(this.options.template);\r\n            // If speed not specified, set to 250ms by default\r\n            this.collapseSpeed = this.options.collapseSpeed === undefined ? this.collapseSpeed : parseInt(this.options.collapseSpeed, 10);\r\n            // If openCloseArrowOnly is specified, set it to options value\r\n            if (this.options.openCloseArrowOnly !== undefined) {\r\n                this.openCloseArrowOnly = this.options.openCloseArrowOnly;\r\n            }\r\n            // If openCloseNodeItem is specified, set it to options value\r\n            if (this.options.openCloseNodeItem !== undefined) {\r\n                this.openCloseNodeItem = this.options.openCloseNodeItem;\r\n            }\r\n            // If nodeItemTemplate is specified, use it instead of the default generic node item template\r\n            if (this.options.nodeItemTemplate !== undefined) {\r\n                this.nodeItemTemplate = this.options.nodeItemTemplate;\r\n            }\r\n            // If nodeItemHeight is specified, use it instead of the default\r\n            if (this.options.nodeItemHeight !== undefined) {\r\n                this.nodeItemHeight = this.options.nodeItemHeight;\r\n            }\r\n            // If arrowEL is specified, use it instead of the default arrowEL depending on the this.nodeItemTemplate markup\r\n            if (this.options.arrowEL !== undefined) {\r\n                this.arrowEL = this.options.arrowEL;\r\n            }\r\n            // If loadChildrenInternally is specified, use it instead of the default loadChildrenInternally flag\r\n            if (this.options.loadChildrenInternally !== undefined) {\r\n                this.loadChildrenInternally = this.options.loadChildrenInternally;\r\n            }\r\n            // If a getChildren LoadParams object is not passed in the options, set the getChildrenLoadParams to an empty object \r\n            this.getChildrenLoadParams = this.options.getChildrenLoadParams === undefined ? {} : this.options.getChildrenLoadParams;\r\n            //\r\n            // If an additionalNodeStateParams is passed into the tree\r\n            if (this.options.additionalNodeStateParams !== undefined) {\r\n                this.additionalNodeStateParams = this.options.additionalNodeStateParams;\r\n                this.additionalNodeStateValue = this.options.additionalNodeStateValue;\r\n                this.additionalNodeStateSelector = this.options.additionalNodeStateSelector;\r\n            }\r\n            // ADD FOR NEW DEPTH BASED CALLS \r\n            if (this.options.specifyDepth !== undefined) {\r\n                this.specifyDepth = this.options.specifyDepth;\r\n            }\r\n            \r\n            // ROUGH\r\n            if (this.options.additionalModelListenersHandlers !== undefined) {\r\n                this.additionalModelListenersHandlers = this.options.additionalModelListenersHandlers;\r\n            }\r\n            //\r\n            if (this.options.additionalRenderFunction !== undefined){\r\n                this.additionalRenderFunction = this.options.additionalRenderFunction;\r\n            }\r\n        },\r\n          \r\n        events:{},\r\n        \r\n        initialiseEvents:function()\r\n        {\r\n            var that = this;\r\n            if(this.openCloseNodeItem)\r\n            {\r\n                if(this.model.get(\"childrenCount\") > 0)\r\n                {\r\n                    $(this.el).find(' > ' + this.nodeItemEL).click(function() { \r\n                            return that.onNodeItemSelected(); \r\n                        });\r\n                }\r\n            }else if(this.openCloseArrowOnly){\r\n                if(this.model.get(\"childrenCount\") > 0)\r\n                {\r\n                    $(this.el).find(' > ' + this.nodeItemEL).find(' > ' + this.arrowEL).click(function() { \r\n                            return that.onNodeItemSelected(); \r\n                        });\r\n                }\r\n            }\r\n        },\r\n\r\n        onNodeItemSelected:function(event)\r\n        {\r\n            if(this.model.get(\"childrenCount\") > 0 && this.model.get(\"children\").length === 0)\r\n            {\r\n                this.toggleOpenState();\r\n                this.setLoadingState();\r\n                this.loadChildren();\r\n            }\r\n            else\r\n            {\r\n                this.toggleOpenState();\r\n            }\r\n        },\r\n        \r\n        loadChildren:function()\r\n        {\r\n            if(this.loadChildrenInternally){\r\n                //roleId:dataStore.get('userSession').get('user').get('currentRoleId'), qualId:dataStore.get('currentQualId')\r\n                this.isModelLoading = true;\r\n                this.getChildrenLoadParams.itemId = this.model.get('itemId');\r\n                if(this.specifyDepth)\r\n                {\r\n                    this.getChildrenLoadParams.depth = this.model.get('depth') + 1;\r\n                }\r\n                this.model.loadParams = this.getChildrenLoadParams;\r\n                var loadOptions = dataStore.getBasicLoadOptions();\r\n                this.model.load(loadOptions);\r\n            }else{\r\n                this.trigger('tree:loadChildren', this.model);\r\n            }\r\n        },\r\n        setLoadingState:function()\r\n        {\r\n            var childrenEL = $(this.el).find('> ' + this.nodeChildrenEL),\r\n                    that = this,\r\n                   h =  Number(this.model.get('childrenCount'))* this.nodeItemHeight,\r\n                   depth = (this.model.get('depth') + 1) * this.depthIndent,\r\n                   loader = \"<li class='loading' style='margin-left:\" + depth + \"px;'></li>\";\r\n            childrenEL.html(loader);\r\n            this.loaderElId = childrenEL;\r\n            childrenEL.find('.loading').animate({\r\n                'height': h\r\n            }, this.collapseSpeed, function() {\r\n                // Animation complete.\r\n                if(that.isModelLoading)\r\n                    that.showLoader();\r\n            });\r\n            \r\n        },\r\n        toggleOpenState: function() \r\n        {\r\n            if (this.model.get(\"isOpen\") === true)\r\n            {\r\n                //this.model.set('viewReference', null);\r\n                this.closeNode();\r\n                this.model.set(\"isOpen\", false);\r\n            }\r\n            else\r\n            {\r\n                //this.model.set('viewReference', this);\r\n                this.openNode();\r\n                this.model.set(\"isOpen\", true);\r\n            }\r\n        },\r\n\r\n        closeNode:function()\r\n        {\r\n            if(this.showArrowEL)\r\n            {\r\n                //var arrow = $(this.el).find('> ' + this.arrowEL + \" > div\");\r\n                var arrow = $(this.el).find(' > ' + this.nodeItemEL).find(this.arrowEL + \" > div\");\r\n                arrow.removeClass('open');\r\n                this.model.get('childrenCount') > 0?arrow.addClass('closed'):arrow.addClass('closedNoChildren');\r\n                \r\n            }\r\n            $(this.el).find('> ' + this.nodeChildrenEL).slideUp(this.collapseSpeed).promise().always(this.onSlideAnimationPromise);\r\n        },\r\n        \r\n        openNode:function()\r\n        {\r\n            if(this.showArrowEL)\r\n            {\r\n                //var arrow = $(this.el).find('> ' + this.arrowEL + \" > div\");\r\n                var arrow = $(this.el).find(' > ' + this.nodeItemEL).find(this.arrowEL + \" > div\");\r\n                arrow.removeClass('closed');\r\n                arrow.addClass('open');\r\n            }\r\n            $(this.el).find('> ' + this.nodeChildrenEL).slideDown(this.collapseSpeed).promise().always(this.onSlideAnimationPromise);\r\n        },\r\n        \r\n        onSlideAnimationPromise:function()\r\n        {\r\n            // to be overriden\r\n        },\r\n        render: function() \r\n        {\r\n            // Attach the HTML created in the views template to the views el\r\n            $(this.el).html(this.template(this.getTemplateData()));\r\n            this.initialiseEvents();\r\n            this.addChildrenInstances();\r\n            // adjust the view elements according to the model's open status\r\n            if(this.model.get(\"isOpen\") === true)\r\n            {\r\n                if(this.model.get('childrenCount') > 0 && this.model.get('children').length === 0)\r\n                {\r\n                    this.closeNode();\r\n                }\r\n                else\r\n                {\r\n                    this.openNodePostRender();\r\n                }\r\n            }\r\n            if(this.additionalRenderFunction !== null){\r\n                this.additionalRenderFunction(this);\r\n            }\r\n        },\r\n        addChildrenInstances:function()\r\n        {\r\n            if(this.model.get(\"children\") === null || this.model.get(\"children\").length <= 0)\r\n                return false;\r\n            // Build child views, insert and render each\r\n            var tree = $(this.el).find('> ' + this.nodeChildrenEL);\r\n            var loadingEL = tree.find(\".loading\");\r\n            var childViewOptions = this.options;\r\n            childViewOptions.el = null;\r\n            var that = this;\r\n            //this.model.get(\"children\")\r\n            _.each(this.model.get(\"children\").models, function(childModel, i) {\r\n                childViewOptions.model = childModel;\r\n                var childView = new this.treeView(childViewOptions);\r\n                childView.render();\r\n                //tree.prepend(childView.$el);\r\n                tree.append(childView.$el);\r\n                if(loadingEL){\r\n                    loadingEL.css(\"height\", loadingEL.outerHeight() - this.nodeItemHeight);\r\n                }\r\n                that.childTreeViews.push(childView);\r\n            }, this);\r\n        },\r\n        onChildrenLoaded:function()\r\n        {\r\n            this.isModelLoading = false;\r\n            this.removeSpinner();\r\n            // reset any show loader states\r\n            var childrenEL = $(this.el).find('> ' + this.nodeChildrenEL);\r\n            //childrenEL.removeClass(\"loading\");\r\n            this.addChildrenInstances();\r\n            //childrenEL.css('min-height', \"\");\r\n            childrenEL.find('.loading').remove();\r\n        },\r\n\r\n        onItemDelete:function()\r\n        {\r\n            this.model.onDestroy();\r\n            this.destroy();\r\n        },\r\n        /*\r\n         * Can be overriden to add additional params to the template data that\r\n         * currently don't reside within the model\r\n         */\r\n        getTemplateData:function()\r\n        {\r\n            //this.model.set('isOpen', this.model.get('children').models.length > 0);\r\n            //this.model.set('hasChildren', this.model.get('children').models.length > 0);\r\n            var treeData = this.model.toJSON();\r\n            treeData.depthIndent = this.depthIndent;\r\n            treeData.nodeItemTemplate = _.template(this.getNodeItemTemplate())(treeData);\r\n            \r\n            return treeData;\r\n        },\r\n        getNodeItemTemplate:function()\r\n        {\r\n            return this.nodeItemTemplate;\r\n        },\r\n        openNodePostRender:function()\r\n        {\r\n            // can be overriden if an external view need initialising prior to opening\r\n            this.openNode();\r\n        },\r\n                \r\n        showLoader:function()\r\n        {\r\n            BaseLoadingView.prototype.showLoader.apply(this);\r\n        },\r\n        removeSpinner:function()\r\n        {\r\n            BaseLoadingView.prototype.removeSpinner.apply(this);\r\n        },\r\n        positionSpinner: function()\r\n        {\r\n            if (this.spinnerEL && this.showSpinner)\r\n            {\r\n                this.spinnerEL.css(\"position\", \"relative\");\r\n                var x = Math.floor($(this.loaderElId).outerWidth() / 2);\r\n                this.spinnerEL.css(\"left\", x + \"px\");\r\n                var y = Math.floor($(this.loaderElId).outerHeight() / 2);\r\n                this.spinnerEL.css(\"top\", -y + \"px\");\r\n            }\r\n        },\r\n        \r\n        onSelectedStateChange:function()\r\n        {\r\n            if(this.model.get('isSelected')){\r\n                $(this.el).find('> .tree-node-item').addClass('selected');\r\n            }else{\r\n                $(this.el).find('> .tree-node-item').removeClass('selected');\r\n            }\r\n        },\r\n        onAdditionalNodeStateParamsChange:function()\r\n        {\r\n            if(this.model.get(this.additionalNodeStateParams) === this.additionalNodeStateValue){\r\n                $(this.el).find('> .tree-node-item').addClass(this.additionalNodeStateSelector);\r\n            }else{\r\n                $(this.el).find('> .tree-node-item').removeClass(this.additionalNodeStateSelector);\r\n            }\r\n        },      \r\n        destroy: function()\r\n        {\r\n            while(this.childTreeViews.length > 0)\r\n            {\r\n                var childTreeView = this.childTreeViews.pop();\r\n                if(childTreeView !== null)\r\n                {\r\n                    childTreeView.destroy();\r\n                    childTreeView = null;\r\n                }\r\n            }\r\n            if(this.model !== null)\r\n            {\r\n                this.model.unbind('change:children', this.onChildrenLoaded, this);\r\n                this.stopListening(this.model, 'change:isSelected', this.onSelectedStateChange, this);\r\n                this.stopListening(this.model, 'deleteSuccess', this.onItemDelete, this);\r\n                this.model = null;\r\n            }\r\n            this.remove();\r\n            BaseLoadingView.prototype.destroy.apply(this);\r\n        }       \r\n    });\r\n    \r\n    return treeView;\r\n});\r\n\n","\ndefine('text!js/views/sectionsStack/examples/sections/PrimarySection.html',[],function () { return '\\r\\n<div class=\"primary-section-example\">\\r\\n    <h4>Example of primary content as a tree</h4>\\r\\n    <div class=\"tree-container\"></div>\\r\\n</div>\\r\\n\\r\\n';});\n\n","define('js/views/sectionsStack/examples/sections/PrimarySectionView',[\r\n    'dataStore',\r\n    'js/views/sectionsStack/section/BaseSectionView',\r\n    'js/views/tree/TreeView',\r\n    'text!js/views/sectionsStack/examples/sections/PrimarySection.html'\r\n  \r\n], function(dataStore, BaseSectionView, TreeView, PrimarySectionTemplate) {\r\n\r\n    var PrimarySectionView = BaseSectionView.extend({\r\n        name:\"PrimarySection\",\r\n        title:\"Section title\",\r\n        nullModelMessage:\"There is currently no item selected\",\r\n        treeView:null,\r\n        //\r\n        initialize: function(options) {\r\n            BaseSectionView.prototype.initialize.apply(this, [options]);\r\n        },\r\n        \r\n        events:\r\n        {\r\n            'click .tree-node-item .active-select-area':'onItemSelected'\r\n        },\r\n    \r\n        requestData:function()\r\n        {\r\n            var queue = [];\r\n            this.model.loadParams = {\r\n                loadType:\"getTreeRoot\",\r\n                itemId:0\r\n            };\r\n            queue.push(this.model);\r\n            BaseSectionView.prototype.requestData.apply(this, [queue]);\r\n        },\r\n        renderSectionsContent:function()\r\n        {\r\n            var contentTemplate = _.template(PrimarySectionTemplate);\r\n            this.contentEL.html(contentTemplate({}));\r\n            this.initialiseTreeView();\r\n        },\r\n        initialiseTreeView:function()\r\n        {    \r\n            this.treeView = new TreeView({\r\n                el:$(this.el).find('.tree-container'),\r\n                model:this.model,\r\n                openCloseNodeItem:false,\r\n                openCloseArrowOnly:true,\r\n                //nodeItemTemplate:ViewSpecificTreeNodeItem,\r\n                getChildrenLoadParams:{\r\n                    loadType:\"getChildren\"\r\n                },\r\n                additionalModelListenersHandlers:[\r\n                    {listener:'change:genericCount', handler:this.onTreeViewGenericCountChange}\r\n                ]\r\n            });\r\n            this.treeView.render();\r\n        },\r\n        onItemSelected:function(event){\r\n            var item = $(event.currentTarget).closest('.tree-node-item');\r\n            this.trigger('sectionStackView:itemSelect', item.attr('data-id'), this.index);\r\n        },\r\n        onTreeViewGenericCountChange:function(model, value){\r\n            var selectorQuery = '[data-id=\"' + model.get('itemId') + '\"]';\r\n            $(selectorQuery).find('.cel-generic-count').html(model.get('genericCount'));\r\n        },\r\n        setAdditionalViewItemHeights: function(contentHeight){\r\n            this.contentEL.css('min-height', contentHeight)\r\n        }\r\n\r\n    });\r\n    return PrimarySectionView;\r\n});\r\n\n","\ndefine('text!js/views/sectionsStack/examples/sections/SecondarySection.html',[],function () { return '\\r\\n<div class=\"secondary-section-example\">\\r\\n    <h4>Item <%= displayName %></h4>\\r\\n    <form>\\r\\n        <label for=\"generic-count-increment\">Increment the item\\'s count</label>\\r\\n        <input name=\"generic-count-increment\" type=\"number\" step=\"1\" value=\"<%= genericCount %>\" <% if(!canEdit){ %> disabled readonly<% } %>>\\r\\n    </form>\\r\\n</div>\\r\\n\\r\\n';});\n\n","define('js/views/sectionsStack/examples/sections/SecondarySectionView',[\r\n    'dataStore',\r\n    'js/views/sectionsStack/section/BaseSectionView',\r\n    'text!js/views/sectionsStack/examples/sections/SecondarySection.html',\r\n  \r\n], function(dataStore, BaseSectionView, SecondarySectionTemplate) {\r\n\r\n    var SecondarySectionView = BaseSectionView.extend({\r\n        name:\"Secondary Section\",\r\n        title:\"Section title\",\r\n        nullModelMessage:\"There is currently no item selected\",\r\n        //\r\n        initialize: function(options) {\r\n            BaseSectionView.prototype.initialize.apply(this, [options]);\r\n        },\r\n\r\n        events:\r\n        {\r\n            \"change form\":\"onFormChange\",\r\n        },\r\n        \r\n        renderSectionsContent:function()\r\n        {\r\n            var contentTemplate = _.template(SecondarySectionTemplate);\r\n            if(this.model !== null){\r\n                this.contentEL.html(contentTemplate(this.model.toJSON()));\r\n            }else{\r\n                this.contentEL.html(this.getNoDataMessageHTML(this.nullModelMessage));\r\n            }\r\n        },\r\n        onFormChange:function(event){\r\n            this.model.set('genericCount', Number($(this.el).find('form > input').val()));\r\n        }\r\n\r\n    });\r\n    return SecondarySectionView;\r\n});\r\n\n","define('js/views/sectionsStack/examples/DualFocusStackPageView',[\r\n    'dataStore',\r\n    'js/views/sectionsStack/BaseSectionsStackPageView',\r\n    'js/views/sectionsStack/examples/sections/PrimarySectionView',\r\n    'js/views/sectionsStack/examples/sections/SecondarySectionView',\r\n    \r\n], function(dataStore, BaseSectionsStackPageView, PrimarySectionView, SecondarySectionView) {\r\n\r\n    var DualFocusSectionsStackView = BaseSectionsStackPageView.extend({\r\n        name:\"Dual-focus stack page view example\",\r\n        articleId:\"basePageSectionsStackContent\",\r\n        gridClass:\"page-section-stack-grid\",\r\n        gridType:\"dual-focus\", // dual-focus || slider\r\n        currentDefaultFocusedIndex:0,\r\n        currentFocusedIndex:0,\r\n        //\r\n        initialize: function(options)\r\n        {\r\n            BaseSectionsStackPageView.prototype.initialize.apply(this, [options]);\r\n        },\r\n \r\n        initialiseModel:function()\r\n        {\r\n            // to be overrideen\r\n            //this.model = dataStore...\r\n        },\r\n        initialiseSectionsStack:function()\r\n        {\r\n            this.sectionsStack.push({\r\n                view:new PrimarySectionView({\r\n                    isOpen:true,\r\n                    restrictHeightToScreen:false,\r\n                    showHeader:false,\r\n                    model:dataStore.get('tree')\r\n                }),\r\n                class:\"primary-dual\",\r\n                ordinal: 1\r\n            });\r\n            this.sectionsStack.push({\r\n                view:new SecondarySectionView({\r\n                    isOpen:false,\r\n                    restrictHeightToScreen:true\r\n                }),\r\n                class:\"secondary-dual\",\r\n                ordinal: 2\r\n            });\r\n        },\r\n\r\n        events:{\r\n           //\r\n        },\r\n        \r\n        addSectionsStackViewsListeners:function(sectionView, index)\r\n        {\r\n            switch(index){\r\n                case 0:\r\n                    this.listenTo(sectionView, 'sectionStackView:itemSelect', this.onSectionItemSelected, this);\r\n                    break;\r\n                case 1:\r\n                    this.listenTo(sectionView, 'sectionStackView:openClose', this.onSectionViewOpenClose, this);\r\n                    break;\r\n            }\r\n        },\r\n        \r\n        removeSectionsStackViewsListeners:function(sectionView, index)\r\n        {\r\n            switch(index){\r\n                case 0:\r\n                    this.stopListening(sectionView, 'sectionStackView:itemSelect', this.onSectionItemSelected);\r\n                    break;\r\n                case 1:\r\n                    this.stopListening(sectionView, 'sectionStackView:openClose', this.onSectionViewOpenClose);\r\n                    break;\r\n            }\r\n        },\r\n\r\n        onSectionItemSelected: function(item, index)\r\n        {\r\n            if(index === 0){\r\n                var itemModel = dataStore.get('tree').getTreeItem(Number(item));\r\n                this.sectionsStack[1].view.updateModel(itemModel);\r\n            }\r\n        }\r\n\r\n    });\r\n    return DualFocusSectionsStackView;\r\n});\r\n\n","define('js/views/sectionsStack/examples/SliderStackPageView',[\r\n    'dataStore',\r\n    'js/views/sectionsStack/BaseSectionsStackPageView',\r\n    'js/views/sectionsStack/examples/sections/PrimarySectionView',\r\n    'js/views/sectionsStack/examples/sections/SecondarySectionView',\r\n    \r\n], function(dataStore, BaseSectionsStackPageView, PrimarySectionView, SecondarySectionView) {\r\n\r\n    var SliderSectionsStackView = BaseSectionsStackPageView.extend({\r\n        name:\"Slider stack page view example\",\r\n        gridType:\"slider\", // dual-focus || slider\r\n        currentFocusedIndex:0,\r\n        //\r\n        initialize: function(options)\r\n        {\r\n            BaseSectionsStackPageView.prototype.initialize.apply(this, [options]);\r\n        },\r\n \r\n        initialiseSectionsStack:function()\r\n        {\r\n            this.sectionsStack.push({\r\n                view:new PrimarySectionView({\r\n                    isOpen:true,\r\n                    restrictHeightToScreen:false,\r\n                    showHeader:false\r\n                }),\r\n                class:\"secondary-slider\",\r\n                ordinal: 1\r\n            });\r\n            this.sectionsStack.push({\r\n                view:new SecondarySectionView({\r\n                    isOpen:false,\r\n                    restrictHeightToScreen:true\r\n                }),\r\n                class:\"secondary-slider\",\r\n                ordinal: 2\r\n            });\r\n        },\r\n\r\n        events:{\r\n           //\r\n        },\r\n        \r\n        addSectionsStackViewsListeners:function(sectionView, index)\r\n        {\r\n            switch(index){\r\n                case 0:\r\n                    this.listenTo(sectionView, 'sectionStackView:itemSelect', this.onSectionItemSelected, this);\r\n                    break;\r\n                case 1:\r\n                    this.listenTo(sectionView, 'sectionStackView:openClose', this.onSectionViewOpenClose, this);\r\n                    break;\r\n            }\r\n        },\r\n        \r\n        removeSectionsStackViewsListeners:function(sectionView, index)\r\n        {\r\n            switch(index){\r\n                case 0:\r\n                    this.stopListening(sectionView, 'sectionStackView:itemSelect', this.onSectionItemSelected);\r\n                    break;\r\n                case 1:\r\n                    this.stopListening(sectionView, 'sectionStackView:openClose', this.onSectionViewOpenClose);\r\n                    break;\r\n            }\r\n        },\r\n\r\n        onSectionItemSelected: function(item, index)\r\n        {\r\n            if(index === 0){\r\n                var temporaryModel = new Backbone.Model({ displayName: \"Item \" + item, id:item});\r\n                this.sectionsStack[1].view.updateModel(temporaryModel);\r\n            }\r\n        }\r\n\r\n    });\r\n    return SliderSectionsStackView;\r\n});\r\n\n","\ndefine('text!js/views/courses/Courses.html',[],function () { return '<article class=\"page-container\">\\r\\n   <header>\\r\\n        <div class=\"article-header-grid\">\\r\\n            <div class=\"header-text\">\\r\\n                <h2>Courses</h2>           \\r\\n            </div>\\r\\n            <div class=\"admin-button-wrapper\">\\r\\n                <a href=\"index.html#defaultpage\" class=\"action-button\" tabindex=\"0\" role=\"button\">Back to default page</a>\\r\\n            </div>\\r\\n        </div>\\r\\n    </header>\\r\\n\\r\\n    \\r\\n    <section class=\"transactions\">\\r\\n        <div class=\"content\">\\r\\n            <h3>BOOM</h3>\\r\\n        </div>\\r\\n    </section>\\r\\n    \\r\\n</article>';});\n\n","define('js/views/courses/CoursesPageView',[\r\n    'dataStore',\r\n    'js/views/PageView',\r\n    'text!js/views/courses/Courses.html'\r\n\r\n], function(\r\n        dataStore, \r\n        PageView,\r\n        CoursesTemplate\r\n    ){\r\n\r\n    var CoursesView = PageView.extend({\r\n        name:\"Courses\",\r\n        initialize: function(options)\r\n        {\r\n            PageView.prototype.initialize.apply(this, [options]);\r\n            this.template = _.template(CoursesTemplate);\r\n        },\r\n        events:\r\n        {\r\n\r\n        },\r\n        renderPageContent: function()\r\n        {\r\n            $(this.el).html(this.template());\r\n        }\r\n        \r\n    });\r\n\r\n    return CoursesView;\r\n});\n","define('example/exampleRouter',[\r\n\r\n    'js/router',\r\n    'dataStore',\r\n    'js/views/sectionsStack/examples/DualFocusStackPageView',\r\n    'js/views/sectionsStack/examples/SliderStackPageView',\r\n    'js/views/courses/CoursesPageView'\r\n    \r\n], function(\r\n        Router, \r\n        dataStore, \r\n        DualFocusStackPageView, \r\n        SliderStackPageView,\r\n        CoursesPageView\r\n    ) {\r\n\r\n    var exampleRouter = Router.extend({\r\n        routes: {\r\n            // Define URL routes\r\n            'myCourses':'showPage',\r\n            'courses':'showPage',\r\n            'dualFocusStack':'showSectionsStackPage',\r\n            'sliderStack':'showSectionsStackPage',\r\n            'error':'showError',\r\n            // Default\r\n            '*actions': 'defaultView'\r\n        },\r\n        switchableViews:[\r\n            'DualFocusStackPageView',\r\n            'SliderStackPageView',\r\n            'CoursesPageView'\r\n        ],\r\n        initialize: function() {\r\n            Router.prototype.initialize.apply(this);\r\n        },\r\n        \r\n        showPage:function(){\r\n            var path = window.location.href,\r\n                selectedPageIdentifier = path.substr(path.lastIndexOf('#') + 1),\r\n                newView = \"\";\r\n            switch(selectedPageIdentifier)\r\n            {\r\n                case 'myCourses':\r\n                    newView = CoursesPageView\r\n                    break;\r\n                case 'courses':\r\n                    newView = CoursesPageView\r\n                    break;\r\n            }\r\n            this.switchView(newView, null, true);\r\n        },     \r\n        showSectionsStackPage:function(){\r\n            var path = window.location.href,\r\n                selectedPageIdentifier = path.substr(path.lastIndexOf('#') + 1),\r\n                newView = \"\";\r\n            switch(selectedPageIdentifier)\r\n            {\r\n                case 'dualFocusStack':\r\n                    newView = DualFocusStackPageView\r\n                    break;\r\n                case 'sliderStack':\r\n                    newView = SliderStackPageView\r\n                    break;\r\n            }\r\n            this.switchView(newView, null, true);\r\n        },     \r\n        showError:function(){\r\n            //console.log(\"Error\");\r\n            //this.switchView(Error);\r\n        },\r\n        switchView: function(view, viewType, showHeader)\r\n        {\r\n            /*if(!showHeader){\r\n                this.headerView.hide();\r\n            }else{\r\n                this.headerView.show();\r\n            }*/\r\n            Router.prototype.switchView.apply(this,[view,viewType]);\r\n        },   \r\n        defaultView: function() {\r\n            window.location.hash = \"courses\";\r\n        }\r\n        \r\n    });\r\n    \r\n    var initialize = function() {\r\n        var router = new exampleRouter;\r\n        Backbone.history.start();\r\n    };\r\n    \r\n    return {\r\n        initialize: initialize\r\n    };\r\n});\r\n\n","define('example/exampleApp',[\r\n    'jquery',\r\n    'underscore',\r\n    'backbone',\r\n    'example/exampleRouter'\r\n    \r\n], function($, _, Backbone, Router) {\r\n    \r\n    var initialize = function() {\r\n        // Pass in our Router module and call it's initialize function\r\n        Router.initialize();\r\n    }\r\n\r\n    return {\r\n        initialize: initialize\r\n    };\r\n});\r\n\n","// This bootstrap file will be responsible for configuring Require.js and loading initially important dependencies.\r\n\r\n// Require.js allows us to configure shortcut alias\r\n// create shortcut alias' to jQuery, Underscore and Backbone\r\n// these are non - AMD\r\n\r\nrequire.config({\r\n    baseUrl:\"../\",\r\n    \r\n    paths: {\r\n        dataStore:'example/js/data/ExampleDataStore',\r\n        jquery: 'externalLibraries/jquery/jquery-1.12.3.min',\r\n        underscore: 'externalLibraries/underscore/underscore-min',\r\n        backbone: 'externalLibraries/backbone/backbone-min',\r\n        text: 'externalLibraries/require/text',\r\n        spinner: 'externalLibraries/spin/spin.min'\r\n    }\r\n});\r\n\r\nrequire([\r\n    // Load our app module and pass it to our definition function (does not need '.js' as is added automatically)\r\n    'example/exampleApp'\r\n\r\n            // Some plugins have to be loaded in order due to their non AMD compliance\r\n            // Because these scripts are not \"modules\" they do not pass any values to the definition function below\r\n], function(App) {\r\n    // The \"app\" dependency is passed in as \"App\"\r\n    // Again, the other dependencies passed in are not \"AMD\" therefore don't pass a parameter to this function\r\n    App.initialize();\r\n});\r\n\ndefine(\"example/exampleMain\", function(){});\n\n"]}